[
    {
        "id": "3f977d5ab3529143",
        "type": "subflow",
        "name": "play playlist",
        "info": "",
        "category": "spotify",
        "in": [
            {
                "x": 80,
                "y": 80,
                "wires": [
                    {
                        "id": "adfcc8dea3a7cb39"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 720,
                "y": 80,
                "wires": [
                    {
                        "id": "ad09d491345c4bcb",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#1DB954",
        "icon": "node-red-contrib-spotify/spotify.png"
    },
    {
        "id": "fbd7b25695f0cf4f",
        "type": "function",
        "z": "3f977d5ab3529143",
        "name": "set playlist uri",
        "func": "msg.params[0].context_uri = msg.payload\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 80,
        "wires": [
            [
                "ad09d491345c4bcb"
            ]
        ]
    },
    {
        "id": "adfcc8dea3a7cb39",
        "type": "subflow:c86f9e881e1c8425",
        "z": "3f977d5ab3529143",
        "name": "",
        "x": 230,
        "y": 80,
        "wires": [
            [
                "fbd7b25695f0cf4f"
            ]
        ]
    },
    {
        "id": "ad09d491345c4bcb",
        "type": "spotify",
        "z": "3f977d5ab3529143",
        "name": "",
        "auth": "9db542c747bf065c",
        "api": "play",
        "x": 610,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "78aadc484017a120",
        "type": "subflow",
        "name": "LOG",
        "info": "",
        "category": "Debugging",
        "in": [
            {
                "x": 60,
                "y": 60,
                "wires": [
                    {
                        "id": "55836d30cbbbf5bc"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "meta": {},
        "color": "#FFAAAA",
        "icon": "node-red/alert.svg",
        "status": {
            "x": 600,
            "y": 120,
            "wires": [
                {
                    "id": "6544545678f9a1c2",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "6544545678f9a1c2",
        "type": "file",
        "z": "78aadc484017a120",
        "name": "log",
        "filename": "filename",
        "filenameType": "msg",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 490,
        "y": 80,
        "wires": [
            [
                "08b8b72e771b9d5c"
            ]
        ]
    },
    {
        "id": "08b8b72e771b9d5c",
        "type": "debug",
        "z": "78aadc484017a120",
        "name": "ERR",
        "active": true,
        "tosidebar": true,
        "console": true,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 640,
        "y": 80,
        "wires": []
    },
    {
        "id": "55836d30cbbbf5bc",
        "type": "template",
        "z": "78aadc484017a120",
        "name": "",
        "field": "filename",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "/home/nodered/log_{{env.NR_FLOW_NAME}}.txt",
        "output": "str",
        "x": 180,
        "y": 60,
        "wires": [
            [
                "8d89321a3318ce07"
            ]
        ]
    },
    {
        "id": "8d89321a3318ce07",
        "type": "switch",
        "z": "78aadc484017a120",
        "name": "if error",
        "property": "error",
        "propertyType": "msg",
        "rules": [
            {
                "t": "istype",
                "v": "object",
                "vt": "object"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 330,
        "y": 60,
        "wires": [
            [
                "df43dad126f13971"
            ],
            [
                "6544545678f9a1c2"
            ]
        ]
    },
    {
        "id": "df43dad126f13971",
        "type": "change",
        "z": "78aadc484017a120",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "error",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 40,
        "wires": [
            [
                "6544545678f9a1c2"
            ]
        ]
    },
    {
        "id": "f6df94ba03cc4cca",
        "type": "subflow",
        "name": "get playlists",
        "info": "",
        "category": "spotify",
        "in": [
            {
                "x": 40,
                "y": 80,
                "wires": [
                    {
                        "id": "12ade49601e02db7"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 460,
                "y": 80,
                "wires": [
                    {
                        "id": "6505c836e87b8728",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#1DB954",
        "icon": "node-red-contrib-spotify/spotify.png"
    },
    {
        "id": "12ade49601e02db7",
        "type": "spotify",
        "z": "f6df94ba03cc4cca",
        "name": "",
        "auth": "9db542c747bf065c",
        "api": "getUserPlaylists",
        "x": 180,
        "y": 80,
        "wires": [
            [
                "6505c836e87b8728"
            ]
        ]
    },
    {
        "id": "6505c836e87b8728",
        "type": "change",
        "z": "f6df94ba03cc4cca",
        "name": "Purify",
        "rules": [
            {
                "t": "delete",
                "p": "payload.href",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.limit",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.next",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.offset",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.previous",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.total",
                "pt": "msg"
            },
            {
                "t": "move",
                "p": "payload.items",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 350,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "8c67f657725ccef5",
        "type": "subflow",
        "name": "toggle shuffle",
        "info": "",
        "category": "spotify",
        "in": [
            {
                "x": 40,
                "y": 60,
                "wires": [
                    {
                        "id": "e770916b88b839a0"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 660,
                "y": 60,
                "wires": [
                    {
                        "id": "30838e56665aa39d",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#1DB954",
        "icon": "node-red-contrib-spotify/spotify.png"
    },
    {
        "id": "e770916b88b839a0",
        "type": "subflow:c86f9e881e1c8425",
        "z": "8c67f657725ccef5",
        "name": "",
        "x": 190,
        "y": 60,
        "wires": [
            [
                "ba655a2789161f3f"
            ]
        ]
    },
    {
        "id": "ba655a2789161f3f",
        "type": "function",
        "z": "8c67f657725ccef5",
        "name": "",
        "func": "miniplayer_shuffle = global.get('miniplayer_shuffle')\nif (typeof miniplayer_shuffle == 'undefined'){\n    miniplayer_shuffle = true  // Set to true as will toggle to false\n}\n\nif (miniplayer_shuffle){\n    msg.params = ['false', msg.params[0]]\n    global.set('miniplayer_shuffle', false)\n}\nelse {\n    msg.params = ['true', msg.params[0]]\n    global.set('miniplayer_shuffle', true)\n}\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 60,
        "wires": [
            [
                "30838e56665aa39d"
            ]
        ]
    },
    {
        "id": "30838e56665aa39d",
        "type": "spotify",
        "z": "8c67f657725ccef5",
        "name": "",
        "auth": "9db542c747bf065c",
        "api": "setShuffle",
        "x": 540,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "fc48ba65803955fc",
        "type": "subflow",
        "name": "set volume",
        "info": "",
        "category": "spotify",
        "in": [
            {
                "x": 180,
                "y": 200,
                "wires": [
                    {
                        "id": "3f692d91b5af7855"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 820,
                "y": 200,
                "wires": [
                    {
                        "id": "959a6b9c1c1ed46e",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#1DB954",
        "icon": "node-red-contrib-spotify/spotify.png"
    },
    {
        "id": "3f692d91b5af7855",
        "type": "subflow:c86f9e881e1c8425",
        "z": "fc48ba65803955fc",
        "name": "",
        "x": 330,
        "y": 200,
        "wires": [
            [
                "b45c4c81b05aa670"
            ]
        ]
    },
    {
        "id": "b45c4c81b05aa670",
        "type": "function",
        "z": "fc48ba65803955fc",
        "name": "",
        "func": "msg.params = [msg.payload, msg.params[0]]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 200,
        "wires": [
            [
                "959a6b9c1c1ed46e"
            ]
        ]
    },
    {
        "id": "959a6b9c1c1ed46e",
        "type": "spotify",
        "z": "fc48ba65803955fc",
        "name": "",
        "auth": "9db542c747bf065c",
        "api": "setVolume",
        "x": 690,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "252b61e61b3de8f7",
        "type": "subflow",
        "name": "pause",
        "info": "",
        "category": "spotify",
        "in": [
            {
                "x": 100,
                "y": 100,
                "wires": [
                    {
                        "id": "61524d67d1845cb3"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 540,
                "y": 100,
                "wires": [
                    {
                        "id": "1353803f9a0afa0d",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#1DB954",
        "icon": "node-red-contrib-spotify/spotify.png"
    },
    {
        "id": "61524d67d1845cb3",
        "type": "subflow:c86f9e881e1c8425",
        "z": "252b61e61b3de8f7",
        "name": "",
        "x": 250,
        "y": 100,
        "wires": [
            [
                "1353803f9a0afa0d"
            ]
        ]
    },
    {
        "id": "1353803f9a0afa0d",
        "type": "spotify",
        "z": "252b61e61b3de8f7",
        "name": "",
        "auth": "9db542c747bf065c",
        "api": "pause",
        "x": 430,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "fc7c816eb784ad42",
        "type": "subflow",
        "name": "get active device",
        "info": "",
        "category": "spotify",
        "in": [
            {
                "x": 80,
                "y": 80,
                "wires": [
                    {
                        "id": "02ab5fb27dc98eca"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 600,
                "y": 80,
                "wires": [
                    {
                        "id": "4af8debfa8865537",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#1DB954",
        "icon": "node-red-contrib-spotify/spotify.png"
    },
    {
        "id": "4af8debfa8865537",
        "type": "function",
        "z": "fc7c816eb784ad42",
        "name": "get active device",
        "func": "if (msg[\"payload\"][\"devices\"]) {\n    for (var device, index = 0, devices = msg[\"payload\"][\"devices\"], len = devices.length; index < len; index += 1) {\n      device = devices[index];\n      if (device[\"is_active\"]) {\n        return device;\n      }\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "02ab5fb27dc98eca",
        "type": "spotify",
        "z": "fc7c816eb784ad42",
        "name": "get devices",
        "auth": "9db542c747bf065c",
        "api": "getMyDevices",
        "x": 230,
        "y": 80,
        "wires": [
            [
                "4af8debfa8865537"
            ]
        ]
    },
    {
        "id": "9db542c747bf065c",
        "type": "spotify-auth",
        "name": "ag.bungee",
        "scope": "user-read-playback-state user-modify-playback-state user-read-currently-playing playlist-read-private playlist-read-collaborative"
    },
    {
        "id": "c86f9e881e1c8425",
        "type": "subflow",
        "name": "set active device",
        "info": "",
        "category": "spotify",
        "in": [
            {
                "x": 80,
                "y": 120,
                "wires": [
                    {
                        "id": "610d27c7db631d73"
                    },
                    {
                        "id": "a65b3a9d3bedc351"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1040,
                "y": 120,
                "wires": [
                    {
                        "id": "f4290cd47e74074e",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#1DB954",
        "icon": "node-red-contrib-spotify/spotify.png"
    },
    {
        "id": "5dce95b9f91d96e2",
        "type": "function",
        "z": "c86f9e881e1c8425",
        "name": "set device ID",
        "func": "msg.params = [\n    {device_id:msg.id}\n];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 80,
        "wires": [
            [
                "dc065aa78e310586"
            ]
        ]
    },
    {
        "id": "6b7ac44c948d126d",
        "type": "join",
        "z": "c86f9e881e1c8425",
        "name": "Join",
        "mode": "custom",
        "build": "object",
        "property": "",
        "propertyType": "full",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 790,
        "y": 120,
        "wires": [
            [
                "f4290cd47e74074e"
            ]
        ]
    },
    {
        "id": "dc065aa78e310586",
        "type": "change",
        "z": "c86f9e881e1c8425",
        "name": "Filter ID",
        "rules": [
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "is_active",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "is_private_session",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "is_restricted",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "name",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "type",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "volume_percent",
                "pt": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "device_id",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 80,
        "wires": [
            [
                "6b7ac44c948d126d"
            ]
        ]
    },
    {
        "id": "f4290cd47e74074e",
        "type": "change",
        "z": "c86f9e881e1c8425",
        "name": "merge",
        "rules": [
            {
                "t": "delete",
                "p": "payload.device_id",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "topic",
                "pt": "msg"
            },
            {
                "t": "move",
                "p": "payload.input.payload",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload.input",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "610d27c7db631d73",
        "type": "subflow:fc7c816eb784ad42",
        "z": "c86f9e881e1c8425",
        "name": "",
        "x": 270,
        "y": 80,
        "wires": [
            [
                "5dce95b9f91d96e2"
            ]
        ]
    },
    {
        "id": "a65b3a9d3bedc351",
        "type": "change",
        "z": "c86f9e881e1c8425",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "input",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 250,
        "y": 120,
        "wires": [
            [
                "6b7ac44c948d126d"
            ]
        ]
    },
    {
        "id": "d3ff0cd0f7b9172c",
        "type": "subflow",
        "name": "play",
        "info": "",
        "category": "spotify",
        "in": [
            {
                "x": 80,
                "y": 80,
                "wires": [
                    {
                        "id": "33768cb100733d2c"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 520,
                "y": 80,
                "wires": [
                    {
                        "id": "baf9d5fa4e4b773f",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#1DB954",
        "icon": "node-red-contrib-spotify/spotify.png"
    },
    {
        "id": "33768cb100733d2c",
        "type": "subflow:c86f9e881e1c8425",
        "z": "d3ff0cd0f7b9172c",
        "name": "",
        "x": 230,
        "y": 80,
        "wires": [
            [
                "baf9d5fa4e4b773f"
            ]
        ]
    },
    {
        "id": "baf9d5fa4e4b773f",
        "type": "spotify",
        "z": "d3ff0cd0f7b9172c",
        "name": "",
        "auth": "9db542c747bf065c",
        "api": "play",
        "x": 410,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "24dd0f46c5af5563",
        "type": "tab",
        "label": "Miniplayer",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "bf22ad2d54eae72e",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2360,
        "y": 80,
        "wires": [
            [
                "dcdd6aeb93bb516d"
            ]
        ]
    },
    {
        "id": "1970e20358943069",
        "type": "mqtt in",
        "z": "24dd0f46c5af5563",
        "name": "spotify action",
        "topic": "/miniplayer/spotify/action",
        "qos": "0",
        "datatype": "auto",
        "broker": "32100583b358b6d5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 620,
        "wires": [
            [
                "e6ed1276ea94dc0a",
                "6866c051c90bcdfe"
            ]
        ]
    },
    {
        "id": "b63e31debac0fbf6",
        "type": "mqtt out",
        "z": "24dd0f46c5af5563",
        "name": "miniplayer action (dummy)",
        "topic": "/miniplayer/spotify/action",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "32100583b358b6d5",
        "x": 2620,
        "y": 540,
        "wires": []
    },
    {
        "id": "12f67605ba251758",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "spotifyplay",
        "payload": "play",
        "payloadType": "str",
        "x": 2380,
        "y": 500,
        "wires": [
            [
                "b63e31debac0fbf6"
            ]
        ]
    },
    {
        "id": "e6ed1276ea94dc0a",
        "type": "switch",
        "z": "24dd0f46c5af5563",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "pause",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "play",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "skip",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "rewind",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "shuffle",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "spotify:playlist:",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 7,
        "x": 330,
        "y": 620,
        "wires": [
            [
                "29ad440a608063c1"
            ],
            [
                "46e2d09b8f05d7b6"
            ],
            [
                "4966cdbcdf156c1c"
            ],
            [
                "7f34eb06c1e9e872"
            ],
            [
                "b616c499b2ed1f1b"
            ],
            [
                "37b0d1798c9cd8bc"
            ],
            [
                "8d974db1998a0b3c"
            ]
        ]
    },
    {
        "id": "14395dda514c803a",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "spotifyplay",
        "payload": "pause",
        "payloadType": "str",
        "x": 2380,
        "y": 540,
        "wires": [
            [
                "b63e31debac0fbf6"
            ]
        ]
    },
    {
        "id": "34ca2035708fee79",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "All devices",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2730,
        "y": 80,
        "wires": []
    },
    {
        "id": "41a5ab9b9be2d6b7",
        "type": "mqtt out",
        "z": "24dd0f46c5af5563",
        "name": "send to miniplayer (response)",
        "topic": "/miniplayer/spotify/response",
        "qos": "0",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "32100583b358b6d5",
        "x": 1710,
        "y": 420,
        "wires": []
    },
    {
        "id": "46e2d09b8f05d7b6",
        "type": "subflow:d3ff0cd0f7b9172c",
        "z": "24dd0f46c5af5563",
        "name": "",
        "x": 630,
        "y": 560,
        "wires": [
            [
                "663d1ca38b3c2644"
            ]
        ]
    },
    {
        "id": "29ad440a608063c1",
        "type": "subflow:252b61e61b3de8f7",
        "z": "24dd0f46c5af5563",
        "name": "",
        "x": 490,
        "y": 560,
        "wires": [
            [
                "663d1ca38b3c2644"
            ]
        ]
    },
    {
        "id": "0523cc12be79c1f7",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Data 1",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 480,
        "wires": []
    },
    {
        "id": "51831980b51f1889",
        "type": "mqtt out",
        "z": "24dd0f46c5af5563",
        "name": "spotify active (dummy)",
        "topic": "/miniplayer/spotify/active/DUMMY",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "32100583b358b6d5",
        "x": 2600,
        "y": 440,
        "wires": []
    },
    {
        "id": "27a6777868cfe135",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "Spotify active",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "/miniplayer/spotify/active",
        "payload": "True",
        "payloadType": "str",
        "x": 2370,
        "y": 420,
        "wires": [
            [
                "51831980b51f1889"
            ]
        ]
    },
    {
        "id": "a868e583b22370ea",
        "type": "mqtt in",
        "z": "24dd0f46c5af5563",
        "name": "miniplayer connection",
        "topic": "/miniplayer/connection/#",
        "qos": "1",
        "datatype": "auto",
        "broker": "32100583b358b6d5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 160,
        "y": 100,
        "wires": [
            [
                "e63cc448d7d77c8e",
                "45f6ff908db29084"
            ]
        ]
    },
    {
        "id": "11e7676b6574ee2c",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "Purify",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "/miniplayer/spotify/response",
                "tot": "str"
            },
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "old_payload",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "old_payload.context.uri",
                "pt": "msg",
                "to": "payload.playlist_uri",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "old_payload.progress_ms",
                "pt": "msg",
                "to": "payload.progress_ms",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "old_payload.item.album.images[1].url",
                "pt": "msg",
                "to": "payload.album.cover_url",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "old_payload.item.album.name",
                "pt": "msg",
                "to": "payload.album.name",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "old_payload.item.artists",
                "pt": "msg",
                "to": "payload.artists",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "old_payload.item.duration_ms",
                "pt": "msg",
                "to": "payload.duration_ms",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "old_payload.item.explicit",
                "pt": "msg",
                "to": "payload.explicit",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "old_payload.item.name",
                "pt": "msg",
                "to": "payload.song_name",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "old_payload.is_playing",
                "pt": "msg",
                "to": "payload.is_playing",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "old_payload.shuffle",
                "pt": "msg",
                "to": "payload.shuffle",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "old_payload",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "qos",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "retain",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1470,
        "y": 520,
        "wires": [
            [
                "92cefe7ad80f0b2e",
                "41a5ab9b9be2d6b7",
                "4ac159b1c4a89167",
                "3568ac9a97a882ac"
            ]
        ]
    },
    {
        "id": "6866c051c90bcdfe",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Spotify action",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 140,
        "y": 580,
        "wires": []
    },
    {
        "id": "ac2fade8a23bd91b",
        "type": "switch",
        "z": "24dd0f46c5af5563",
        "name": "If context",
        "property": "payload.context",
        "propertyType": "msg",
        "rules": [
            {
                "t": "null"
            },
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1300,
        "y": 500,
        "wires": [
            [
                "0497a095ffde058e"
            ],
            [
                "11e7676b6574ee2c"
            ]
        ]
    },
    {
        "id": "0497a095ffde058e",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "Purify",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "/miniplayer/spotify/response",
                "tot": "str"
            },
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "old_payload",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "old_payload.progress_ms",
                "pt": "msg",
                "to": "payload.progress_ms",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.album",
                "pt": "msg",
                "to": "{\"album\":{\"cover_url\":\"\",\"name\":\"\"}}",
                "tot": "json"
            },
            {
                "t": "move",
                "p": "old_payload.item.album.images[1].url",
                "pt": "msg",
                "to": "payload.album.cover_url",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "old_payload.item.album.name",
                "pt": "msg",
                "to": "payload.album.name",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "old_payload.item.artists",
                "pt": "msg",
                "to": "payload.artists",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "old_payload.item.duration_ms",
                "pt": "msg",
                "to": "payload.duration_ms",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "old_payload.item.explicit",
                "pt": "msg",
                "to": "payload.explicit",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "old_payload.item.name",
                "pt": "msg",
                "to": "payload.song_name",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "old_payload.is_playing",
                "pt": "msg",
                "to": "payload.is_playing",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "old_payload.shuffle",
                "pt": "msg",
                "to": "payload.shuffle",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "old_payload",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "qos",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "retain",
                "pt": "msg"
            },
            {
                "t": "set",
                "p": "payload.playlist_uri",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1470,
        "y": 480,
        "wires": [
            [
                "92cefe7ad80f0b2e",
                "41a5ab9b9be2d6b7",
                "4ac159b1c4a89167",
                "3568ac9a97a882ac"
            ]
        ]
    },
    {
        "id": "1b85d52f0aa03a03",
        "type": "mqtt out",
        "z": "24dd0f46c5af5563",
        "name": "send to miniplayer (device)",
        "topic": "/miniplayer/spotify/device",
        "qos": "0",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "32100583b358b6d5",
        "x": 1180,
        "y": 380,
        "wires": []
    },
    {
        "id": "2eaa9b6b09c3b660",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "Purify data",
        "rules": [
            {
                "t": "delete",
                "p": "qos",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "retain",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "id",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "is_active",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "is_private_session",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "is_restricted",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "params",
                "pt": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{}",
                "tot": "json"
            },
            {
                "t": "move",
                "p": "name",
                "pt": "msg",
                "to": "payload.name",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "type",
                "pt": "msg",
                "to": "payload.type",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "volume_percent",
                "pt": "msg",
                "to": "payload.volume_percent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 950,
        "y": 380,
        "wires": [
            [
                "1b85d52f0aa03a03",
                "c7400e41dbfabc4d"
            ]
        ]
    },
    {
        "id": "d508cd35277cd8fb",
        "type": "switch",
        "z": "24dd0f46c5af5563",
        "name": "If playing",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 940,
        "y": 440,
        "wires": [
            [
                "6b968724e0f3869f"
            ],
            [
                "eb200b621c462aeb"
            ]
        ]
    },
    {
        "id": "4ac159b1c4a89167",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Data 2",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1630,
        "y": 380,
        "wires": []
    },
    {
        "id": "c1401c55057ec5b4",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "Set to Empty",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "/miniplayer/spotify/response",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 420,
        "wires": [
            [
                "4ac159b1c4a89167",
                "41a5ab9b9be2d6b7",
                "3568ac9a97a882ac"
            ]
        ]
    },
    {
        "id": "e86c14b550e2a913",
        "type": "subflow:fc48ba65803955fc",
        "z": "24dd0f46c5af5563",
        "name": "",
        "x": 690,
        "y": 720,
        "wires": [
            [
                "663d1ca38b3c2644"
            ]
        ]
    },
    {
        "id": "d12b91d0f817dc41",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "Miniplayer connected",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "connected",
        "payloadType": "str",
        "x": 2400,
        "y": 320,
        "wires": [
            [
                "e8c93342f6195ee8"
            ]
        ]
    },
    {
        "id": "661072e2dbfa62de",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "Miniplayer disconnected",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "disconnected",
        "payloadType": "str",
        "x": 2400,
        "y": 360,
        "wires": [
            [
                "e8c93342f6195ee8"
            ]
        ]
    },
    {
        "id": "e8c93342f6195ee8",
        "type": "mqtt out",
        "z": "24dd0f46c5af5563",
        "name": "miniplayer connection (dummy)",
        "topic": "/miniplayer/connection/DUMMY",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "32100583b358b6d5",
        "x": 2690,
        "y": 340,
        "wires": []
    },
    {
        "id": "8d974db1998a0b3c",
        "type": "function",
        "z": "24dd0f46c5af5563",
        "name": "To number",
        "func": "msg.payload = Number.parseInt(msg.payload)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 720,
        "wires": [
            [
                "e86c14b550e2a913"
            ]
        ]
    },
    {
        "id": "f59e65e09d65171b",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "Volume 30",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "30",
        "payloadType": "str",
        "x": 2360,
        "y": 580,
        "wires": [
            [
                "b63e31debac0fbf6"
            ]
        ]
    },
    {
        "id": "e63cc448d7d77c8e",
        "type": "function",
        "z": "24dd0f46c5af5563",
        "name": "Count miniplayers",
        "func": "var miniplayers = flow.get('miniplayers')\nvar spotify_miniplayers = flow.get('spotify_miniplayers')\nvar weather_miniplayers = flow.get('weather_miniplayers')\nvar mac_address = msg.topic.replace('/miniplayer/connection/', '')\n\nif (typeof miniplayers == 'undefined'){\n    miniplayers = []\n}\nif (typeof spotify_miniplayers == 'undefined'){\n    spotify_miniplayers = []\n}\nif (typeof weather_miniplayers == 'undefined'){\n    weather_miniplayers = []\n}\n\nif (msg.payload == 'connected'){\n    if (!miniplayers.includes(mac_address)){\n        miniplayers.push(mac_address) // Add mac_address to list\n        flow.set('miniplayers', miniplayers)\n        return {'payload': flow.get('miniplayers')}\n    }\n}\n\nelse if (msg.payload == 'disconnected'){\n    if (miniplayers.includes(mac_address)){\n        miniplayers.splice(miniplayers.indexOf(mac_address), 1)\n        flow.set('miniplayers', miniplayers)\n        if (spotify_miniplayers.includes(mac_address)){\n            spotify_miniplayers.splice(spotify_miniplayers.indexOf(mac_address))\n            flow.set('spotify_miniplayers', spotify_miniplayers)\n            return {'payload': flow.get('miniplayers'), 'spotify': true}\n        }\n        if (weather_miniplayers.includes(mac_address)){\n            weather_miniplayers.splice(weather_miniplayers.indexOf(mac_address))\n            flow.set('weather_miniplayers', weather_miniplayers)\n            return {'payload': flow.get('miniplayers'), 'weather': true}\n        }\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 100,
        "wires": [
            [
                "50daa97b14d61dfb",
                "82091b5fa9ad0e73"
            ]
        ]
    },
    {
        "id": "50daa97b14d61dfb",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Total miniplayers",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 100,
        "wires": []
    },
    {
        "id": "b996d39b7df89776",
        "type": "mqtt in",
        "z": "24dd0f46c5af5563",
        "name": "spotify active",
        "topic": "/miniplayer/spotify/active/#",
        "qos": "1",
        "datatype": "auto",
        "broker": "32100583b358b6d5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 420,
        "wires": [
            [
                "14d33398e9eb3931",
                "a7067ee9424352ce"
            ]
        ]
    },
    {
        "id": "14d33398e9eb3931",
        "type": "function",
        "z": "24dd0f46c5af5563",
        "name": "Count spotify miniplayers",
        "func": "var spotify_miniplayers = flow.get('spotify_miniplayers')\nvar mac_address = msg.topic.replace('/miniplayer/spotify/active/', '')\nif (typeof spotify_miniplayers == 'undefined'){\n    spotify_miniplayers = []\n}\n\n\nif (msg.payload == 'True'){\n    if (!spotify_miniplayers.includes(mac_address)){\n        spotify_miniplayers.push(mac_address) // Add mac_address to list\n        flow.set('spotify_miniplayers', spotify_miniplayers)\n        return {'payload': true}  // Start response loop\n    }\n}\n\nelse if (msg.payload == 'False'){\n    if (spotify_miniplayers.includes(mac_address)){\n        spotify_miniplayers.splice(spotify_miniplayers.indexOf(mac_address), 1)\n        flow.set('spotify_miniplayers', spotify_miniplayers)\n        if (spotify_miniplayers.length == 0){\n            return {'payload': false}  // Stop response loop\n        }\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 420,
        "wires": [
            [
                "99228556903d9e23",
                "e0981b96b0f50fd5"
            ]
        ]
    },
    {
        "id": "99228556903d9e23",
        "type": "trigger",
        "z": "24dd0f46c5af5563",
        "name": "10s",
        "op1": "true",
        "op2": "0",
        "op1type": "bool",
        "op2type": "str",
        "duration": "-10",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "false",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 550,
        "y": 420,
        "wires": [
            [
                "f2b5ac0677637c79",
                "94b306389e715fe7",
                "e5f06b3c01f1862d",
                "8b661937b08aaa8d"
            ]
        ]
    },
    {
        "id": "bcda87a17832a1be",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "Spotify not active",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "/miniplayer/spotify/active",
        "payload": "False",
        "payloadType": "str",
        "x": 2380,
        "y": 460,
        "wires": [
            [
                "51831980b51f1889"
            ]
        ]
    },
    {
        "id": "94b306389e715fe7",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Data request",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "\"Data request\"",
        "targetType": "jsonata",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 480,
        "wires": []
    },
    {
        "id": "30faacbc4ec01a9c",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 410,
        "y": 380,
        "wires": [
            [
                "99228556903d9e23",
                "e0981b96b0f50fd5"
            ]
        ]
    },
    {
        "id": "77dff58c98524782",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 410,
        "y": 460,
        "wires": [
            [
                "99228556903d9e23",
                "e0981b96b0f50fd5"
            ]
        ]
    },
    {
        "id": "44d9113fb83a6a5c",
        "type": "link out",
        "z": "24dd0f46c5af5563",
        "name": "",
        "mode": "link",
        "links": [
            "2d54aa74dfb53bf5"
        ],
        "x": 1715,
        "y": 560,
        "wires": []
    },
    {
        "id": "92cefe7ad80f0b2e",
        "type": "switch",
        "z": "24dd0f46c5af5563",
        "name": "end - 12s",
        "property": "payload.progress_ms",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "payload.duration_ms - 12000",
                "vt": "jsonata"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1640,
        "y": 480,
        "wires": [
            [
                "ad81721c243851ca"
            ]
        ]
    },
    {
        "id": "305cc39396662eec",
        "type": "delay",
        "z": "24dd0f46c5af5563",
        "name": "Delay",
        "pauseType": "delayv",
        "timeout": "12000",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1630,
        "y": 560,
        "wires": [
            [
                "44d9113fb83a6a5c"
            ]
        ]
    },
    {
        "id": "f2b5ac0677637c79",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Device request",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "\"Device request\"",
        "targetType": "jsonata",
        "statusVal": "",
        "statusType": "auto",
        "x": 740,
        "y": 340,
        "wires": []
    },
    {
        "id": "ad81721c243851ca",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "delay",
                "pt": "msg",
                "to": "payload.duration_ms - payload.progress_ms + 2000",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1660,
        "y": 520,
        "wires": [
            [
                "305cc39396662eec"
            ]
        ]
    },
    {
        "id": "2d54aa74dfb53bf5",
        "type": "link in",
        "z": "24dd0f46c5af5563",
        "name": "",
        "links": [
            "44d9113fb83a6a5c",
            "087adb4f4317b484"
        ],
        "x": 585,
        "y": 340,
        "wires": [
            [
                "94b306389e715fe7",
                "e5f06b3c01f1862d",
                "8b661937b08aaa8d",
                "f2b5ac0677637c79"
            ]
        ]
    },
    {
        "id": "8b661937b08aaa8d",
        "type": "subflow:fc7c816eb784ad42",
        "z": "24dd0f46c5af5563",
        "name": "",
        "x": 750,
        "y": 380,
        "wires": [
            [
                "2eaa9b6b09c3b660",
                "bc1716e55292fa21"
            ]
        ]
    },
    {
        "id": "bc1716e55292fa21",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Device 1",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 940,
        "y": 340,
        "wires": []
    },
    {
        "id": "c7400e41dbfabc4d",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Device 2",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1120,
        "y": 340,
        "wires": []
    },
    {
        "id": "037f57c8b89b1468",
        "type": "comment",
        "z": "24dd0f46c5af5563",
        "name": "If NodeRed or MQTT restarts then all devices will disconnect!",
        "info": "",
        "x": 280,
        "y": 60,
        "wires": []
    },
    {
        "id": "b83bc6dab978b4af",
        "type": "comment",
        "z": "24dd0f46c5af5563",
        "name": "SPOTIFY",
        "info": "",
        "x": 120,
        "y": 300,
        "wires": [],
        "icon": "node-red-contrib-spotify/spotify.png"
    },
    {
        "id": "13f71484458bcb85",
        "type": "comment",
        "z": "24dd0f46c5af5563",
        "name": "WEATHER",
        "info": "",
        "x": 120,
        "y": 960,
        "wires": [],
        "icon": "font-awesome/fa-cloud"
    },
    {
        "id": "8a0ea85cbed1809f",
        "type": "mqtt in",
        "z": "24dd0f46c5af5563",
        "name": "weather active (local)",
        "topic": "/miniplayer/weather/local/active/#",
        "qos": "1",
        "datatype": "auto",
        "broker": "32100583b358b6d5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 160,
        "y": 1080,
        "wires": [
            [
                "e8908e16e1999ef1",
                "00578de34dc929a0"
            ]
        ]
    },
    {
        "id": "00578de34dc929a0",
        "type": "function",
        "z": "24dd0f46c5af5563",
        "name": "Count weather miniplayers",
        "func": "var weather_miniplayers = flow.get('weather_miniplayers')\nvar mac_address = msg.topic.replace('/miniplayer/weather/local/active/', '')\nif (typeof weather_miniplayers == 'undefined'){\n    weather_miniplayers = []\n}\n\n\nif (msg.payload == 'True'){\n    if (!weather_miniplayers.includes(mac_address)){\n        weather_miniplayers.push(mac_address) // Add mac_address to list\n        flow.set('weather_miniplayers', weather_miniplayers)\n        return {'payload': true}  // Start response loop\n    }\n}\n\nelse if (msg.payload == 'False'){\n    if (weather_miniplayers.includes(mac_address)){\n        weather_miniplayers.splice(weather_miniplayers.indexOf(mac_address), 1)\n        flow.set('weather_miniplayers', weather_miniplayers)\n        if (weather_miniplayers.length == 0){\n            return {'payload': false}  // Stop response loop\n        }\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1080,
        "wires": [
            [
                "6c45267a077de063",
                "a9cade9ac3c4bef6"
            ]
        ]
    },
    {
        "id": "fe1857b0d4d5be32",
        "type": "http in",
        "z": "24dd0f46c5af5563",
        "name": "",
        "url": "/weather/icon",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 1200,
        "wires": [
            [
                "c101c9bfcecd5bc9",
                "9d0196ddca55398e"
            ]
        ]
    },
    {
        "id": "242d5d8ae6b0495d",
        "type": "http response",
        "z": "24dd0f46c5af5563",
        "name": "Response",
        "statusCode": "200",
        "headers": {
            "content-type": "image/png"
        },
        "x": 640,
        "y": 1200,
        "wires": []
    },
    {
        "id": "61897f025a37a687",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Spotify miniplayers",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 150,
        "y": 340,
        "wires": []
    },
    {
        "id": "a7067ee9424352ce",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "set",
        "rules": [
            {
                "t": "delete",
                "p": "topic",
                "pt": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "spotify_miniplayers",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 110,
        "y": 380,
        "wires": [
            [
                "61897f025a37a687",
                "017c513181ba5547"
            ]
        ]
    },
    {
        "id": "7e3f8a1043cfd67f",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Local weather miniplayers",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 170,
        "y": 1000,
        "wires": []
    },
    {
        "id": "e8908e16e1999ef1",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "set",
        "rules": [
            {
                "t": "delete",
                "p": "topic",
                "pt": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "weather_miniplayers",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 110,
        "y": 1040,
        "wires": [
            [
                "7e3f8a1043cfd67f",
                "3e4a26a90854d0c2"
            ]
        ]
    },
    {
        "id": "c117f83a40f56442",
        "type": "mqtt out",
        "z": "24dd0f46c5af5563",
        "name": "Weather response (local)",
        "topic": "/miniplayer/weather/local/response",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "32100583b358b6d5",
        "x": 1930,
        "y": 1080,
        "wires": []
    },
    {
        "id": "5851cafc357bcec3",
        "type": "file in",
        "z": "24dd0f46c5af5563",
        "name": "Image",
        "filename": "filename",
        "filenameType": "msg",
        "format": "",
        "allProps": false,
        "x": 490,
        "y": 1200,
        "wires": [
            [
                "242d5d8ae6b0495d"
            ]
        ]
    },
    {
        "id": "9d0196ddca55398e",
        "type": "template",
        "z": "24dd0f46c5af5563",
        "name": "",
        "field": "filename",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "/home/nodered/weather_icons/{{payload.id}}.png",
        "output": "str",
        "x": 340,
        "y": 1200,
        "wires": [
            [
                "5851cafc357bcec3"
            ]
        ]
    },
    {
        "id": "d6d98dd84074b2a7",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "unknown",
        "props": [
            {
                "p": "payload.id",
                "v": "unknown",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2360,
        "y": 740,
        "wires": [
            [
                "308d60ace7edb4f3"
            ]
        ]
    },
    {
        "id": "94dac3ceae277a73",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "clear_sunny",
        "props": [
            {
                "p": "payload.id",
                "v": "clear_sunny",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2370,
        "y": 780,
        "wires": [
            [
                "308d60ace7edb4f3"
            ]
        ]
    },
    {
        "id": "88ae22097af449d4",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "t_storm",
        "props": [
            {
                "p": "payload.id",
                "v": "t_storm",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2350,
        "y": 820,
        "wires": [
            [
                "308d60ace7edb4f3"
            ]
        ]
    },
    {
        "id": "308d60ace7edb4f3",
        "type": "http request",
        "z": "24dd0f46c5af5563",
        "name": "",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "query",
        "url": "http://192.168.1.201:1880/weather/icon",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 2550,
        "y": 780,
        "wires": [
            [
                "cac34f72fdb2caa9"
            ]
        ]
    },
    {
        "id": "c101c9bfcecd5bc9",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Icon request",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 130,
        "y": 1160,
        "wires": []
    },
    {
        "id": "6c45267a077de063",
        "type": "trigger",
        "z": "24dd0f46c5af5563",
        "name": "2m",
        "op1": "true",
        "op2": "0",
        "op1type": "bool",
        "op2type": "str",
        "duration": "-2",
        "extend": false,
        "overrideDelay": false,
        "units": "min",
        "reset": "false",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 630,
        "y": 1080,
        "wires": [
            [
                "f4d61a33bcac7e13"
            ]
        ]
    },
    {
        "id": "16fdfe1037a835b5",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 490,
        "y": 1040,
        "wires": [
            [
                "6c45267a077de063",
                "a9cade9ac3c4bef6"
            ]
        ]
    },
    {
        "id": "bab827e6f119e9a2",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 490,
        "y": 1120,
        "wires": [
            [
                "6c45267a077de063",
                "a9cade9ac3c4bef6"
            ]
        ]
    },
    {
        "id": "55e1a0afd2090c30",
        "type": "mqtt out",
        "z": "24dd0f46c5af5563",
        "name": "Local weather (dummy)",
        "topic": "/miniplayer/weather/local/active/DUMMY",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "32100583b358b6d5",
        "x": 2670,
        "y": 660,
        "wires": []
    },
    {
        "id": "d4faf7f3cfb43f53",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "Local weather active",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "/miniplayer/weather/local/active",
        "payload": "True",
        "payloadType": "str",
        "x": 2390,
        "y": 640,
        "wires": [
            [
                "55e1a0afd2090c30"
            ]
        ]
    },
    {
        "id": "4e9cf994be721bc9",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "Local weather not active",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "/miniplayer/weather/local/active",
        "payload": "False",
        "payloadType": "str",
        "x": 2410,
        "y": 680,
        "wires": [
            [
                "55e1a0afd2090c30"
            ]
        ]
    },
    {
        "id": "20906aee66605d12",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Spotify miniplayers",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2690,
        "y": 160,
        "wires": []
    },
    {
        "id": "4ce6e711cff74948",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "set",
        "rules": [
            {
                "t": "delete",
                "p": "topic",
                "pt": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "spotify_miniplayers",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2510,
        "y": 160,
        "wires": [
            [
                "20906aee66605d12"
            ]
        ]
    },
    {
        "id": "0c06fb64d04f1180",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2360,
        "y": 160,
        "wires": [
            [
                "4ce6e711cff74948"
            ]
        ]
    },
    {
        "id": "ef78a13b4e07fc3a",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Local weather miniplayers",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2710,
        "y": 200,
        "wires": []
    },
    {
        "id": "455b6f33a19a2d7b",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "set",
        "rules": [
            {
                "t": "delete",
                "p": "topic",
                "pt": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "weather_miniplayers",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2510,
        "y": 200,
        "wires": [
            [
                "ef78a13b4e07fc3a"
            ]
        ]
    },
    {
        "id": "8591bd285d81b4f9",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2360,
        "y": 200,
        "wires": [
            [
                "455b6f33a19a2d7b"
            ]
        ]
    },
    {
        "id": "ed40fce8fb8d7ba4",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "set",
        "rules": [
            {
                "t": "delete",
                "p": "topic",
                "pt": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "miniplayers",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2510,
        "y": 120,
        "wires": [
            [
                "554bb1306e099ead"
            ]
        ]
    },
    {
        "id": "23670214cb23c481",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2360,
        "y": 120,
        "wires": [
            [
                "ed40fce8fb8d7ba4"
            ]
        ]
    },
    {
        "id": "554bb1306e099ead",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "All miniplayers",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2680,
        "y": 120,
        "wires": []
    },
    {
        "id": "9e422cdeddd1f4bd",
        "type": "switch",
        "z": "24dd0f46c5af5563",
        "name": "",
        "property": "spotify",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 770,
        "y": 140,
        "wires": [
            [
                "7c80af40c9507eaf"
            ]
        ]
    },
    {
        "id": "6d34201cb6c4ec55",
        "type": "switch",
        "z": "24dd0f46c5af5563",
        "name": "",
        "property": "weather",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 770,
        "y": 180,
        "wires": [
            [
                "dae980fe0d57af34"
            ]
        ]
    },
    {
        "id": "d81efbd94cf8c1dd",
        "type": "link out",
        "z": "24dd0f46c5af5563",
        "name": "",
        "mode": "link",
        "links": [
            "8dd86a37f0562806"
        ],
        "x": 1005,
        "y": 140,
        "wires": []
    },
    {
        "id": "e95e83e50031f5f5",
        "type": "link out",
        "z": "24dd0f46c5af5563",
        "name": "",
        "mode": "link",
        "links": [
            "3b7f2e40c8a5820a"
        ],
        "x": 1005,
        "y": 180,
        "wires": []
    },
    {
        "id": "82091b5fa9ad0e73",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 140,
        "wires": [
            [
                "6d34201cb6c4ec55",
                "9e422cdeddd1f4bd"
            ]
        ]
    },
    {
        "id": "8dd86a37f0562806",
        "type": "link in",
        "z": "24dd0f46c5af5563",
        "name": "",
        "links": [
            "d81efbd94cf8c1dd",
            "f23fcf74242053c3"
        ],
        "x": 445,
        "y": 340,
        "wires": [
            [
                "99228556903d9e23",
                "e0981b96b0f50fd5"
            ]
        ]
    },
    {
        "id": "3b7f2e40c8a5820a",
        "type": "link in",
        "z": "24dd0f46c5af5563",
        "name": "",
        "links": [
            "e95e83e50031f5f5"
        ],
        "x": 525,
        "y": 1000,
        "wires": [
            [
                "6c45267a077de063",
                "a9cade9ac3c4bef6"
            ]
        ]
    },
    {
        "id": "7c80af40c9507eaf",
        "type": "switch",
        "z": "24dd0f46c5af5563",
        "name": "",
        "property": "flow.get('spotify_miniplayers').length",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 910,
        "y": 140,
        "wires": [
            [
                "d81efbd94cf8c1dd"
            ]
        ]
    },
    {
        "id": "dae980fe0d57af34",
        "type": "switch",
        "z": "24dd0f46c5af5563",
        "name": "",
        "property": "flow.get('weather_miniplayers').length",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 910,
        "y": 180,
        "wires": [
            [
                "e95e83e50031f5f5"
            ]
        ]
    },
    {
        "id": "5481c215050e7ca6",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "Set shuffle state",
        "rules": [
            {
                "t": "set",
                "p": "payload.shuffle",
                "pt": "msg",
                "to": "miniplayer_shuffle",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1300,
        "y": 460,
        "wires": [
            [
                "ac2fade8a23bd91b"
            ]
        ]
    },
    {
        "id": "b616c499b2ed1f1b",
        "type": "subflow:8c67f657725ccef5",
        "z": "24dd0f46c5af5563",
        "name": "",
        "x": 510,
        "y": 640,
        "wires": [
            [
                "663d1ca38b3c2644"
            ]
        ]
    },
    {
        "id": "eb200b621c462aeb",
        "type": "switch",
        "z": "24dd0f46c5af5563",
        "name": "Shuffle",
        "property": "miniplayer_shuffle",
        "propertyType": "global",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "null"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1090,
        "y": 460,
        "wires": [
            [
                "5481c215050e7ca6"
            ],
            [
                "941d9ee432d5c298"
            ]
        ]
    },
    {
        "id": "941d9ee432d5c298",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "Default state",
        "rules": [
            {
                "t": "set",
                "p": "miniplayer_shuffle",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1110,
        "y": 500,
        "wires": [
            [
                "5481c215050e7ca6"
            ]
        ]
    },
    {
        "id": "7d93d7894c9b8d17",
        "type": "comment",
        "z": "24dd0f46c5af5563",
        "name": "OCTOPRINT",
        "info": "",
        "x": 130,
        "y": 1380,
        "wires": [],
        "icon": "font-awesome/fa-cloud"
    },
    {
        "id": "6026f25804263372",
        "type": "mqtt in",
        "z": "24dd0f46c5af5563",
        "name": "OctoPrint active (local)",
        "topic": "/miniplayer/octoprint/active/#",
        "qos": "1",
        "datatype": "auto",
        "broker": "32100583b358b6d5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 160,
        "y": 1500,
        "wires": [
            [
                "014b9e02b0e83077",
                "e9069dca0b71176c"
            ]
        ]
    },
    {
        "id": "e93cfa5284113510",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Octoprint miniplayers",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 160,
        "y": 1420,
        "wires": []
    },
    {
        "id": "014b9e02b0e83077",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "set",
        "rules": [
            {
                "t": "delete",
                "p": "topic",
                "pt": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "weather_miniplayers",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 110,
        "y": 1460,
        "wires": [
            [
                "e93cfa5284113510"
            ]
        ]
    },
    {
        "id": "e9069dca0b71176c",
        "type": "function",
        "z": "24dd0f46c5af5563",
        "name": "Count octoprint miniplayers",
        "func": "var octoprint_miniplayers = flow.get('octoprint_miniplayers')\nvar mac_address = msg.topic.replace('/miniplayer/octoprint/active/', '')\nif (typeof octoprint_miniplayers == 'undefined'){\n    octoprint_miniplayers = []\n}\n\n\nif (msg.payload == 'True'){\n    if (!octoprint_miniplayers.includes(mac_address)){\n        octoprint_miniplayers.push(mac_address) // Add mac_address to list\n        flow.set('octoprint_miniplayers', octoprint_miniplayers)\n        return {'payload': true}  // Start response loop\n    }\n}\n\nelse if (msg.payload == 'False'){\n    if (octoprint_miniplayers.includes(mac_address)){\n        octoprint_miniplayers.splice(\n            octoprint_miniplayers.indexOf(mac_address), 1)\n        flow.set('octoprint_miniplayers', octoprint_miniplayers)\n        if (octoprint_miniplayers.length == 0){\n            return {'payload': false}  // Stop response loop\n        }\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1500,
        "wires": [
            []
        ]
    },
    {
        "id": "e6aabd7023ba1e5d",
        "type": "mqtt in",
        "z": "24dd0f46c5af5563",
        "name": "Position update",
        "topic": "octoPrint/event/PositionUpdate",
        "qos": "2",
        "datatype": "auto",
        "broker": "32100583b358b6d5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 140,
        "y": 1700,
        "wires": [
            [
                "27c5185c24bd5004"
            ]
        ]
    },
    {
        "id": "27c5185c24bd5004",
        "type": "json",
        "z": "24dd0f46c5af5563",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 310,
        "y": 1700,
        "wires": [
            [
                "5d74d30ec602cbe3"
            ]
        ]
    },
    {
        "id": "1b75aa9ea549d1be",
        "type": "mqtt out",
        "z": "24dd0f46c5af5563",
        "name": "OctoPrint position response",
        "topic": "/miniplayer/octoprint/position",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "32100583b358b6d5",
        "x": 720,
        "y": 1700,
        "wires": []
    },
    {
        "id": "5d74d30ec602cbe3",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "old_payload",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "old_payload.x",
                "pt": "msg",
                "to": "payload.position.x",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "old_payload.y",
                "pt": "msg",
                "to": "payload.position.y",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "old_payload.z",
                "pt": "msg",
                "to": "payload.position.z",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "position",
                "tot": "str"
            },
            {
                "t": "delete",
                "p": "old_payload",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "qos",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "retain",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 1700,
        "wires": [
            [
                "1b75aa9ea549d1be",
                "4cf87076d5ccec79"
            ]
        ]
    },
    {
        "id": "4cf87076d5ccec79",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Position",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 660,
        "y": 1660,
        "wires": []
    },
    {
        "id": "d3ea118b31333090",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"reason\": null, \"y\": 184.0, \"e\": 0.0, \"f\": 18000.0, \"x\": -19, \"t\": 0, \"z\": 18.03, \"_event\": \"PositionUpdate\", \"_timestamp\": 1667651654}",
        "payloadType": "jsonata",
        "x": 310,
        "y": 1660,
        "wires": [
            [
                "5d74d30ec602cbe3"
            ]
        ]
    },
    {
        "id": "c2b4554485452686",
        "type": "mqtt out",
        "z": "24dd0f46c5af5563",
        "name": "OctoPrint temperature response",
        "topic": "/miniplayer/octoprint/temperature",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "32100583b358b6d5",
        "x": 810,
        "y": 1780,
        "wires": []
    },
    {
        "id": "f51c103a02cd295c",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"reason\": null, \"y\": 5.3, \"e\": 0.0, \"f\": 18000.0, \"x\": 13.7, \"t\": 0, \"z\": 1.2, \"_event\": \"PositionUpdate\", \"_timestamp\": 1667651654}",
        "payloadType": "jsonata",
        "x": 310,
        "y": 1620,
        "wires": [
            [
                "5d74d30ec602cbe3"
            ]
        ]
    },
    {
        "id": "bc3733eaac7a1ab8",
        "type": "join",
        "z": "24dd0f46c5af5563",
        "name": "",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 450,
        "y": 1780,
        "wires": [
            [
                "12315c72d921024c"
            ]
        ]
    },
    {
        "id": "25625730234fb808",
        "type": "mqtt in",
        "z": "24dd0f46c5af5563",
        "name": "Printer tool temp",
        "topic": "octoPrint/temperature/tool0",
        "qos": "2",
        "datatype": "auto",
        "broker": "32100583b358b6d5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 140,
        "y": 1780,
        "wires": [
            [
                "570b3edd0a957284"
            ]
        ]
    },
    {
        "id": "85cf3f068d17b084",
        "type": "mqtt in",
        "z": "24dd0f46c5af5563",
        "name": "Printer bed temp",
        "topic": "octoPrint/temperature/bed",
        "qos": "2",
        "datatype": "auto",
        "broker": "32100583b358b6d5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 140,
        "y": 1840,
        "wires": [
            [
                "52d572a4b560a497"
            ]
        ]
    },
    {
        "id": "570b3edd0a957284",
        "type": "json",
        "z": "24dd0f46c5af5563",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 310,
        "y": 1780,
        "wires": [
            [
                "bc3733eaac7a1ab8"
            ]
        ]
    },
    {
        "id": "52d572a4b560a497",
        "type": "json",
        "z": "24dd0f46c5af5563",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 310,
        "y": 1840,
        "wires": [
            [
                "bc3733eaac7a1ab8"
            ]
        ]
    },
    {
        "id": "0e25d824cbaf2ddd",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Merged temp",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 750,
        "y": 1740,
        "wires": []
    },
    {
        "id": "12315c72d921024c",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "Purify",
        "rules": [
            {
                "t": "move",
                "p": "payload.octoPrint/temperature/bed",
                "pt": "msg",
                "to": "payload.bed",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.octoPrint/temperature/tool0",
                "pt": "msg",
                "to": "payload.tool",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "qos",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "retain",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.bed._timestamp",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.tool._timestamp",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 1780,
        "wires": [
            [
                "c2b4554485452686",
                "0e25d824cbaf2ddd"
            ]
        ]
    },
    {
        "id": "4ca08c85da991f32",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "",
        "props": [
            {
                "p": "payload.octoPrint/temperature/bed",
                "v": "{\"actual\":64.21,\"target\":65,\"_timestamp\":1667769283}",
                "vt": "jsonata"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "octoPrint/temperature/bed",
        "x": 250,
        "y": 1980,
        "wires": [
            [
                "bc3733eaac7a1ab8"
            ]
        ]
    },
    {
        "id": "13e32626e9f2f83c",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "",
        "props": [
            {
                "p": "payload.octoPrint/temperature/bed",
                "v": "{\"actual\":64.63,\"target\":65,\"_timestamp\":1667807397}",
                "vt": "jsonata"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "octoPrint/temperature/bed",
        "x": 250,
        "y": 2020,
        "wires": [
            [
                "bc3733eaac7a1ab8"
            ]
        ]
    },
    {
        "id": "cb1b86b23657f2cc",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "",
        "props": [
            {
                "p": "payload.octoPrint/temperature/tool0",
                "v": "{\"actual\":150,\"target\":210,\"_timestamp\":1667807395}",
                "vt": "jsonata"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "octoPrint/temperature/tool0",
        "x": 240,
        "y": 1900,
        "wires": [
            [
                "bc3733eaac7a1ab8"
            ]
        ]
    },
    {
        "id": "5d299009a22c785c",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "",
        "props": [
            {
                "p": "payload.octoPrint/temperature/tool0",
                "v": "{\"actual\":209.8,\"target\":210,\"_timestamp\":1667807391}",
                "vt": "jsonata"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "octoPrint/temperature/tool0",
        "x": 240,
        "y": 1940,
        "wires": [
            [
                "bc3733eaac7a1ab8"
            ]
        ]
    },
    {
        "id": "4a8f4f43cb39e9f5",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Octoprint miniplayers",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2700,
        "y": 240,
        "wires": []
    },
    {
        "id": "13f79160fdfb7802",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "set",
        "rules": [
            {
                "t": "delete",
                "p": "topic",
                "pt": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "octoprint_miniplayers",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2510,
        "y": 240,
        "wires": [
            [
                "4a8f4f43cb39e9f5"
            ]
        ]
    },
    {
        "id": "b8225ad094f51bfb",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2360,
        "y": 240,
        "wires": [
            [
                "13f79160fdfb7802"
            ]
        ]
    },
    {
        "id": "c6245efd3a818474",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "Purify",
        "rules": [
            {
                "t": "move",
                "p": "payload.weather.main",
                "pt": "msg",
                "to": "payload.state",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.weather.icon",
                "pt": "msg",
                "to": "payload.icon",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.main.temp",
                "pt": "msg",
                "to": "payload.temp.real",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.main.feels_like",
                "pt": "msg",
                "to": "payload.temp.feels",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.main.temp_min",
                "pt": "msg",
                "to": "payload.temp.min",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.main.temp_max",
                "pt": "msg",
                "to": "payload.temp.max",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.main.rainfall.rate",
                "pt": "msg",
                "to": "payload.rain",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.main.humidity.value",
                "pt": "msg",
                "to": "payload.hum",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.visibility",
                "pt": "msg",
                "to": "payload.vis",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.clouds.all",
                "pt": "msg",
                "to": "payload.clouds",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload.weather",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.main",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.name",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.timezone",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1730,
        "y": 1080,
        "wires": [
            [
                "dc5a993fad880a44",
                "c117f83a40f56442",
                "8b523495fe2444a6",
                "b2c936e24294e1f3",
                "7653c72fe1d072f7"
            ]
        ]
    },
    {
        "id": "dc5a993fad880a44",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Weather response (local)",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1930,
        "y": 1040,
        "wires": []
    },
    {
        "id": "f4d61a33bcac7e13",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "Merge local + remote",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "remote_weather",
                "tot": "global",
                "dc": true
            },
            {
                "t": "set",
                "p": "payload.wind",
                "pt": "msg",
                "to": "local_weather.wind",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "payload.main.temp",
                "pt": "msg",
                "to": "local_weather.temperature",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 1080,
        "wires": [
            [
                "2d4217c0bdf0daf9"
            ]
        ]
    },
    {
        "id": "2131a85cb2c74a12",
        "type": "catch",
        "z": "24dd0f46c5af5563",
        "name": "",
        "scope": [
            "5851cafc357bcec3",
            "9d0196ddca55398e"
        ],
        "uncaught": false,
        "x": 110,
        "y": 1240,
        "wires": [
            [
                "5e7dba009ec10590"
            ]
        ]
    },
    {
        "id": "5e7dba009ec10590",
        "type": "http response",
        "z": "24dd0f46c5af5563",
        "name": "Response",
        "statusCode": "500",
        "headers": {},
        "x": 260,
        "y": 1240,
        "wires": []
    },
    {
        "id": "45f6ff908db29084",
        "type": "delay",
        "z": "24dd0f46c5af5563",
        "name": "0.5s",
        "pauseType": "delay",
        "timeout": "500",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 290,
        "y": 140,
        "wires": [
            [
                "f502104287dfac8f"
            ]
        ]
    },
    {
        "id": "f502104287dfac8f",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "set",
        "rules": [
            {
                "t": "delete",
                "p": "topic",
                "pt": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "miniplayers.length",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 140,
        "wires": [
            [
                "5b564b0883873a06"
            ]
        ]
    },
    {
        "id": "3568ac9a97a882ac",
        "type": "link out",
        "z": "24dd0f46c5af5563",
        "name": "",
        "mode": "link",
        "links": [
            "f7cd2d10a4508dc6"
        ],
        "x": 1595,
        "y": 340,
        "wires": []
    },
    {
        "id": "f7cd2d10a4508dc6",
        "type": "link in",
        "z": "24dd0f46c5af5563",
        "name": "",
        "links": [
            "3568ac9a97a882ac"
        ],
        "x": 1245,
        "y": 640,
        "wires": [
            [
                "d36ce45ee456f87e",
                "cb317b5d8dd29749",
                "95a667b0ae78e499",
                "a47c45a859db65cb",
                "db2f8ad04580db6e",
                "3cfb294afef83b73",
                "0c97121d8af99bbd",
                "7d41692213ad1d10"
            ]
        ]
    },
    {
        "id": "3ea2886b447fe723",
        "type": "template",
        "z": "24dd0f46c5af5563",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<img src=\"{{{payload}}}\">",
        "output": "str",
        "x": 2040,
        "y": 1220,
        "wires": [
            [
                "72d836b617b0976c"
            ]
        ]
    },
    {
        "id": "b2c936e24294e1f3",
        "type": "template",
        "z": "24dd0f46c5af5563",
        "name": "",
        "field": "filename",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "/home/nodered/weather_icons/{{payload.icon}}.png",
        "output": "str",
        "x": 1880,
        "y": 1140,
        "wires": [
            [
                "242b84cdad865d25"
            ]
        ]
    },
    {
        "id": "242b84cdad865d25",
        "type": "file in",
        "z": "24dd0f46c5af5563",
        "name": "Image",
        "filename": "",
        "format": "",
        "allProps": false,
        "x": 2030,
        "y": 1140,
        "wires": [
            []
        ]
    },
    {
        "id": "2d4217c0bdf0daf9",
        "type": "switch",
        "z": "24dd0f46c5af5563",
        "name": "Choose rain",
        "property": "payload.main.rain.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "local_weather.rainfall.rate",
                "vt": "global"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1030,
        "y": 1080,
        "wires": [
            [
                "de56befe825d1f33"
            ],
            [
                "68d92c9950682d06"
            ]
        ]
    },
    {
        "id": "05b3be6fb1dc9167",
        "type": "switch",
        "z": "24dd0f46c5af5563",
        "name": "Choose hum",
        "property": "payload.main.humidity.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "local_weather.humidity.value",
                "vt": "global"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1390,
        "y": 1080,
        "wires": [
            [
                "1abd1f5b439588f5"
            ],
            [
                "45076fa8cf7bdf56"
            ]
        ]
    },
    {
        "id": "45076fa8cf7bdf56",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "Local",
        "rules": [
            {
                "t": "set",
                "p": "payload.main.humidity.value",
                "pt": "msg",
                "to": "local_weather.humidity.value",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1410,
        "y": 1120,
        "wires": [
            [
                "1abd1f5b439588f5"
            ]
        ]
    },
    {
        "id": "e70fcdf2a7cb2c0f",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1730,
        "y": 1120,
        "wires": []
    },
    {
        "id": "794b31bcd5f02439",
        "type": "ui_button",
        "z": "24dd0f46c5af5563",
        "name": "",
        "group": "63bf67d663da6832",
        "order": 6,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Update",
        "tooltip": "",
        "color": "",
        "bgcolor": "#469fff",
        "className": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "update_btn",
        "topicType": "str",
        "x": 780,
        "y": 1040,
        "wires": [
            [
                "f4d61a33bcac7e13"
            ]
        ]
    },
    {
        "id": "e0981b96b0f50fd5",
        "type": "ui_switch",
        "z": "24dd0f46c5af5563",
        "name": "",
        "label": "Active",
        "tooltip": "",
        "group": "7a4150cde2244860",
        "order": 7,
        "width": 4,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 550,
        "y": 380,
        "wires": [
            [
                "99228556903d9e23",
                "f23fcf74242053c3"
            ]
        ]
    },
    {
        "id": "a9cade9ac3c4bef6",
        "type": "ui_switch",
        "z": "24dd0f46c5af5563",
        "name": "",
        "label": "Active",
        "tooltip": "",
        "group": "63bf67d663da6832",
        "order": 7,
        "width": 4,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 630,
        "y": 1040,
        "wires": [
            [
                "6c45267a077de063"
            ]
        ]
    },
    {
        "id": "5b564b0883873a06",
        "type": "ui_text",
        "z": "24dd0f46c5af5563",
        "group": "04ef89f479803e78",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Clients",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 570,
        "y": 180,
        "wires": []
    },
    {
        "id": "017c513181ba5547",
        "type": "ui_text",
        "z": "24dd0f46c5af5563",
        "group": "04ef89f479803e78",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Spotify",
        "format": "{{msg.payload.length}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 250,
        "y": 380,
        "wires": []
    },
    {
        "id": "3e4a26a90854d0c2",
        "type": "ui_text",
        "z": "24dd0f46c5af5563",
        "group": "04ef89f479803e78",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Local Weather",
        "format": "{{msg.payload.length}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 280,
        "y": 1040,
        "wires": []
    },
    {
        "id": "d36ce45ee456f87e",
        "type": "ui_text",
        "z": "24dd0f46c5af5563",
        "group": "2a745e6b.07df92",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Song - ",
        "format": "{{msg.payload.song_name}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1350,
        "y": 640,
        "wires": []
    },
    {
        "id": "8b523495fe2444a6",
        "type": "ui_text",
        "z": "24dd0f46c5af5563",
        "group": "63bf67d663da6832",
        "order": 9,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Condition",
        "format": "{{msg.payload.state}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1880,
        "y": 1180,
        "wires": []
    },
    {
        "id": "72d836b617b0976c",
        "type": "ui_template",
        "z": "24dd0f46c5af5563",
        "group": "63bf67d663da6832",
        "name": "Weather icon",
        "order": 8,
        "width": 3,
        "height": 3,
        "format": "<div ng-bind-html=\"msg.payload\"></div>\n",
        "storeOutMessages": true,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 2050,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "dcdd6aeb93bb516d",
        "type": "spotify",
        "z": "24dd0f46c5af5563",
        "name": "",
        "auth": "9db542c747bf065c",
        "api": "getMyDevices",
        "x": 2540,
        "y": 80,
        "wires": [
            [
                "34ca2035708fee79"
            ]
        ]
    },
    {
        "id": "e5f06b3c01f1862d",
        "type": "spotify",
        "z": "24dd0f46c5af5563",
        "name": "Get current track",
        "auth": "9db542c747bf065c",
        "api": "getMyCurrentPlayingTrack",
        "x": 750,
        "y": 440,
        "wires": [
            [
                "0523cc12be79c1f7",
                "d508cd35277cd8fb"
            ]
        ]
    },
    {
        "id": "7f34eb06c1e9e872",
        "type": "spotify",
        "z": "24dd0f46c5af5563",
        "name": "",
        "auth": "9db542c747bf065c",
        "api": "skipToPrevious",
        "x": 700,
        "y": 600,
        "wires": [
            [
                "663d1ca38b3c2644"
            ]
        ]
    },
    {
        "id": "4966cdbcdf156c1c",
        "type": "spotify",
        "z": "24dd0f46c5af5563",
        "name": "",
        "auth": "9db542c747bf065c",
        "api": "skipToNext",
        "x": 510,
        "y": 600,
        "wires": [
            [
                "663d1ca38b3c2644"
            ]
        ]
    },
    {
        "id": "8a4ab9b30d42f340",
        "type": "jimp-image",
        "z": "24dd0f46c5af5563",
        "name": "",
        "data": "payload",
        "dataType": "msg",
        "ret": "b64",
        "parameter1": "144",
        "parameter1Type": "num",
        "parameter2": "144",
        "parameter2Type": "num",
        "parameter3": "",
        "parameter3Type": "none",
        "parameter4": "",
        "parameter4Type": "none",
        "parameter5": "",
        "parameter5Type": "msg",
        "parameter6": "",
        "parameter6Type": "msg",
        "parameter7": "",
        "parameter7Type": "msg",
        "parameter8": "",
        "parameter8Type": "msg",
        "sendProperty": "payload",
        "sendPropertyType": "msg",
        "parameterCount": 3,
        "jimpFunction": "resize",
        "selectedJimpFunction": {
            "name": "resize",
            "fn": "resize",
            "description": "resize the image. One of the w or h parameters can be set to automatic (\"Jimp.AUTO\" or -1).",
            "parameters": [
                {
                    "name": "w",
                    "type": "num|auto",
                    "required": true,
                    "hint": "the width to resize the image to (or \"Jimp.AUTO\" or -1)"
                },
                {
                    "name": "h",
                    "type": "num|auto",
                    "required": true,
                    "hint": "the height to resize the image to (or \"Jimp.AUTO\" or -1)"
                },
                {
                    "name": "mode",
                    "type": "resizeMode",
                    "required": false,
                    "hint": "a scaling method (e.g. Jimp.RESIZE_BEZIER)"
                }
            ]
        },
        "x": 2030,
        "y": 1180,
        "wires": [
            [
                "3ea2886b447fe723"
            ]
        ]
    },
    {
        "id": "165ab0947b69311f",
        "type": "image viewer",
        "z": "24dd0f46c5af5563",
        "name": "",
        "width": "128",
        "data": "payload",
        "dataType": "msg",
        "active": true,
        "x": 790,
        "y": 1200,
        "wires": [
            []
        ]
    },
    {
        "id": "cac34f72fdb2caa9",
        "type": "image viewer",
        "z": "24dd0f46c5af5563",
        "name": "",
        "width": "128",
        "data": "payload",
        "dataType": "msg",
        "active": true,
        "x": 2710,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "7653c72fe1d072f7",
        "type": "ui_artlessgauge",
        "z": "24dd0f46c5af5563",
        "group": "63bf67d663da6832",
        "order": 12,
        "width": 7,
        "height": 1,
        "name": "Humidity",
        "icon": "",
        "label": "Humidity",
        "unit": "%",
        "layout": "linear",
        "decimals": 0,
        "differential": false,
        "minmax": false,
        "colorTrack": "#469fff",
        "style": "2, 1",
        "colorFromTheme": true,
        "property": "payload.hum",
        "secondary": "secondary",
        "inline": true,
        "animate": true,
        "sectors": [
            {
                "val": 0,
                "col": "#469fff",
                "t": "min",
                "dot": 0
            },
            {
                "val": 100,
                "col": "#469fff",
                "t": "max",
                "dot": 0
            }
        ],
        "lineWidth": "5",
        "bgcolorFromTheme": false,
        "diffCenter": "",
        "x": 1880,
        "y": 1220,
        "wires": []
    },
    {
        "id": "609951ce78863b2e",
        "type": "http in",
        "z": "24dd0f46c5af5563",
        "name": "",
        "url": "/spotify/playlists",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 840,
        "wires": [
            [
                "e994c5a9f419ae44"
            ]
        ]
    },
    {
        "id": "ecd4a3086497dca8",
        "type": "catch",
        "z": "24dd0f46c5af5563",
        "name": "",
        "scope": [
            "b881309c671a32c4",
            "d58e2a5c7c1072ec",
            "89bda18941b90266",
            "e994c5a9f419ae44",
            "e62df553c0204b09",
            "5364dc7a9a8266e3"
        ],
        "uncaught": false,
        "x": 790,
        "y": 780,
        "wires": [
            [
                "f85107c85121e691",
                "8dd531323f652038"
            ]
        ]
    },
    {
        "id": "f85107c85121e691",
        "type": "http response",
        "z": "24dd0f46c5af5563",
        "name": "Error",
        "statusCode": "500",
        "headers": {},
        "x": 1070,
        "y": 820,
        "wires": []
    },
    {
        "id": "b881309c671a32c4",
        "type": "subflow:f6df94ba03cc4cca",
        "z": "24dd0f46c5af5563",
        "name": "",
        "x": 490,
        "y": 860,
        "wires": [
            [
                "ca51d9577dc00162"
            ]
        ]
    },
    {
        "id": "6ab1f4c4892b8343",
        "type": "http response",
        "z": "24dd0f46c5af5563",
        "name": "Response",
        "statusCode": "200",
        "headers": {},
        "x": 1080,
        "y": 860,
        "wires": []
    },
    {
        "id": "8dd531323f652038",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Playlists",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1080,
        "y": 780,
        "wires": []
    },
    {
        "id": "d58e2a5c7c1072ec",
        "type": "spotify",
        "z": "24dd0f46c5af5563",
        "name": "",
        "auth": "9db542c747bf065c",
        "api": "getPlaylist",
        "x": 630,
        "y": 820,
        "wires": [
            [
                "5364dc7a9a8266e3"
            ]
        ]
    },
    {
        "id": "89bda18941b90266",
        "type": "function",
        "z": "24dd0f46c5af5563",
        "name": "set id",
        "func": "msg.params = [msg.payload.id]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 820,
        "wires": [
            [
                "d58e2a5c7c1072ec"
            ]
        ]
    },
    {
        "id": "e994c5a9f419ae44",
        "type": "switch",
        "z": "24dd0f46c5af5563",
        "name": "if id",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "hask",
                "v": "id",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 330,
        "y": 840,
        "wires": [
            [
                "89bda18941b90266"
            ],
            [
                "b881309c671a32c4"
            ]
        ]
    },
    {
        "id": "e62df553c0204b09",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "purify",
        "rules": [
            {
                "t": "delete",
                "p": "payload.collaborative",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.description",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.primary_color",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.followers",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.external_urls",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.tracks.items",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.href",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.type",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.uri",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.snapshot_id",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 840,
        "wires": [
            [
                "6ab1f4c4892b8343",
                "8dd531323f652038"
            ]
        ]
    },
    {
        "id": "8538bea3fdfcd05a",
        "type": "mqtt in",
        "z": "24dd0f46c5af5563",
        "name": "Printing status",
        "topic": "octoPrint/progress/printing",
        "qos": "2",
        "datatype": "auto",
        "broker": "32100583b358b6d5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 1560,
        "wires": [
            [
                "4586647bb5c6799c"
            ]
        ]
    },
    {
        "id": "294a662c6924fe79",
        "type": "mqtt out",
        "z": "24dd0f46c5af5563",
        "name": "OctoPrint status response",
        "topic": "/miniplayer/octoprint/status",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "32100583b358b6d5",
        "x": 630,
        "y": 1560,
        "wires": []
    },
    {
        "id": "4586647bb5c6799c",
        "type": "json",
        "z": "24dd0f46c5af5563",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 290,
        "y": 1560,
        "wires": [
            [
                "c405835a5fe3f307"
            ]
        ]
    },
    {
        "id": "c405835a5fe3f307",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "Purify",
        "rules": [
            {
                "t": "move",
                "p": "payload.printer_data.state",
                "pt": "msg",
                "to": "payload.state",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.printer_data.progress",
                "pt": "msg",
                "to": "payload.progress",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload.location",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.printer_data",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload._timestamp",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.progress.filepos",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.progress.printTimeLeftOrigin",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 1560,
        "wires": [
            [
                "294a662c6924fe79",
                "e3e6bd30f092b8a7"
            ]
        ]
    },
    {
        "id": "95a667b0ae78e499",
        "type": "ui_text",
        "z": "24dd0f46c5af5563",
        "group": "7a4150cde2244860",
        "order": 8,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Song - ",
        "format": "{{msg.payload.song_name}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1490,
        "y": 640,
        "wires": []
    },
    {
        "id": "3cfb294afef83b73",
        "type": "ui_text",
        "z": "24dd0f46c5af5563",
        "group": "7a4150cde2244860",
        "order": 9,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Artist - ",
        "format": "{{msg.payload.artists[0].name}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1630,
        "y": 640,
        "wires": []
    },
    {
        "id": "d4951159bad17c5c",
        "type": "ui_template",
        "z": "24dd0f46c5af5563",
        "group": "7a4150cde2244860",
        "name": "Spotify cover",
        "order": 6,
        "width": 3,
        "height": 3,
        "format": "<div ng-bind-html=\"msg.payload\"></div>\n",
        "storeOutMessages": true,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 1950,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "d838117a65009170",
        "type": "template",
        "z": "24dd0f46c5af5563",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<img src=\"{{{payload}}}\">",
        "output": "str",
        "x": 1780,
        "y": 680,
        "wires": [
            [
                "d4951159bad17c5c"
            ]
        ]
    },
    {
        "id": "0e073beeb5dac8e0",
        "type": "jimp-image",
        "z": "24dd0f46c5af5563",
        "name": "",
        "data": "payload",
        "dataType": "msg",
        "ret": "b64",
        "parameter1": "144",
        "parameter1Type": "num",
        "parameter2": "144",
        "parameter2Type": "num",
        "parameter3": "",
        "parameter3Type": "none",
        "parameter4": "",
        "parameter4Type": "none",
        "parameter5": "",
        "parameter5Type": "msg",
        "parameter6": "",
        "parameter6Type": "msg",
        "parameter7": "",
        "parameter7Type": "msg",
        "parameter8": "",
        "parameter8Type": "msg",
        "sendProperty": "payload",
        "sendPropertyType": "msg",
        "parameterCount": 3,
        "jimpFunction": "resize",
        "selectedJimpFunction": {
            "name": "resize",
            "fn": "resize",
            "description": "resize the image. One of the w or h parameters can be set to automatic (\"Jimp.AUTO\" or -1).",
            "parameters": [
                {
                    "name": "w",
                    "type": "num|auto",
                    "required": true,
                    "hint": "the width to resize the image to (or \"Jimp.AUTO\" or -1)"
                },
                {
                    "name": "h",
                    "type": "num|auto",
                    "required": true,
                    "hint": "the height to resize the image to (or \"Jimp.AUTO\" or -1)"
                },
                {
                    "name": "mode",
                    "type": "resizeMode",
                    "required": false,
                    "hint": "a scaling method (e.g. Jimp.RESIZE_BEZIER)"
                }
            ]
        },
        "x": 1630,
        "y": 680,
        "wires": [
            [
                "d838117a65009170"
            ]
        ]
    },
    {
        "id": "cb317b5d8dd29749",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "Set url",
        "rules": [
            {
                "t": "move",
                "p": "payload.album.cover_url",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1350,
        "y": 680,
        "wires": [
            [
                "92014bacf1469423"
            ]
        ]
    },
    {
        "id": "0bc0f77e6a037306",
        "type": "ui_button",
        "z": "24dd0f46c5af5563",
        "name": "Pause",
        "group": "7a4150cde2244860",
        "order": 12,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#212529",
        "className": "",
        "icon": "{{icon}}",
        "payload": "true",
        "payloadType": "bool",
        "topic": "topic",
        "topicType": "msg",
        "x": 1630,
        "y": 740,
        "wires": [
            [
                "845bac58a7c681be"
            ]
        ]
    },
    {
        "id": "92014bacf1469423",
        "type": "switch",
        "z": "24dd0f46c5af5563",
        "name": "!empty",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1490,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "845bac58a7c681be",
        "type": "link out",
        "z": "24dd0f46c5af5563",
        "name": "link out 1",
        "mode": "link",
        "links": [
            "71284b02c43f0306"
        ],
        "x": 1745,
        "y": 800,
        "wires": []
    },
    {
        "id": "71284b02c43f0306",
        "type": "link in",
        "z": "24dd0f46c5af5563",
        "name": "link in 1",
        "links": [
            "845bac58a7c681be"
        ],
        "x": 185,
        "y": 660,
        "wires": [
            [
                "e6ed1276ea94dc0a"
            ]
        ]
    },
    {
        "id": "a47c45a859db65cb",
        "type": "switch",
        "z": "24dd0f46c5af5563",
        "name": "",
        "property": "payload.is_playing",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1350,
        "y": 740,
        "wires": [
            [
                "0227709a9231c138"
            ],
            [
                "f895a5c7ad895cbe"
            ]
        ]
    },
    {
        "id": "0227709a9231c138",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "pause",
        "rules": [
            {
                "t": "set",
                "p": "icon",
                "pt": "msg",
                "to": "fa-pause",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1490,
        "y": 720,
        "wires": [
            [
                "0bc0f77e6a037306"
            ]
        ]
    },
    {
        "id": "f895a5c7ad895cbe",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "play",
        "rules": [
            {
                "t": "set",
                "p": "icon",
                "pt": "msg",
                "to": "fa-play",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1490,
        "y": 760,
        "wires": [
            [
                "0bc0f77e6a037306"
            ]
        ]
    },
    {
        "id": "dc53f131e7cf72ac",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 1190,
        "y": 120,
        "wires": [
            [
                "9e02c3c5876bc2b0",
                "934b53e81d2d7078",
                "be86ca595740444d",
                "697ee693ed213e88",
                "8a0bd33a90e7f31d"
            ]
        ]
    },
    {
        "id": "9e02c3c5876bc2b0",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Restart",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "\"Restarted Miniplayer\"",
        "targetType": "jsonata",
        "statusVal": "",
        "statusType": "auto",
        "x": 1540,
        "y": 120,
        "wires": []
    },
    {
        "id": "f23fcf74242053c3",
        "type": "link out",
        "z": "24dd0f46c5af5563",
        "name": "link out 3",
        "mode": "link",
        "links": [
            "8dd86a37f0562806"
        ],
        "x": 675,
        "y": 300,
        "wires": []
    },
    {
        "id": "db2f8ad04580db6e",
        "type": "ui_button",
        "z": "24dd0f46c5af5563",
        "name": "Skip",
        "group": "7a4150cde2244860",
        "order": 13,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#212529",
        "className": "",
        "icon": "skip_next",
        "payload": "skip",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1350,
        "y": 780,
        "wires": [
            [
                "845bac58a7c681be"
            ]
        ]
    },
    {
        "id": "0c97121d8af99bbd",
        "type": "ui_button",
        "z": "24dd0f46c5af5563",
        "name": "Rewind",
        "group": "7a4150cde2244860",
        "order": 11,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#212529",
        "className": "",
        "icon": "skip_previous",
        "payload": "rewind",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1360,
        "y": 820,
        "wires": [
            [
                "845bac58a7c681be"
            ]
        ]
    },
    {
        "id": "315747e106074a39",
        "type": "ui_button",
        "z": "24dd0f46c5af5563",
        "name": "Shuffle",
        "group": "7a4150cde2244860",
        "order": 14,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "{{icon_colour}}",
        "bgcolor": "#212529",
        "className": "",
        "icon": "shuffle",
        "payload": "shuffle",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1630,
        "y": 860,
        "wires": [
            [
                "845bac58a7c681be"
            ]
        ]
    },
    {
        "id": "7d41692213ad1d10",
        "type": "switch",
        "z": "24dd0f46c5af5563",
        "name": "",
        "property": "payload.shuffle",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1350,
        "y": 860,
        "wires": [
            [
                "3aadcc782e28001e"
            ],
            [
                "afef03d56a20a12c"
            ]
        ]
    },
    {
        "id": "3aadcc782e28001e",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "true",
        "rules": [
            {
                "t": "set",
                "p": "icon_colour",
                "pt": "msg",
                "to": "#1DB954",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1490,
        "y": 840,
        "wires": [
            [
                "315747e106074a39"
            ]
        ]
    },
    {
        "id": "afef03d56a20a12c",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "false",
        "rules": [
            {
                "t": "set",
                "p": "icon_colour",
                "pt": "msg",
                "to": "#FFFFFF",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1490,
        "y": 880,
        "wires": [
            [
                "315747e106074a39"
            ]
        ]
    },
    {
        "id": "5364dc7a9a8266e3",
        "type": "switch",
        "z": "24dd0f46c5af5563",
        "name": "check",
        "property": "error",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 790,
        "y": 820,
        "wires": [
            [
                "8dd531323f652038",
                "f85107c85121e691"
            ],
            [
                "e62df553c0204b09"
            ]
        ]
    },
    {
        "id": "e3e6bd30f092b8a7",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Status",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 1520,
        "wires": []
    },
    {
        "id": "de56befe825d1f33",
        "type": "switch",
        "z": "24dd0f46c5af5563",
        "name": "check",
        "property": "payload.main.rainfall",
        "propertyType": "msg",
        "rules": [
            {
                "t": "hask",
                "v": "rate",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1210,
        "y": 1080,
        "wires": [
            [
                "05b3be6fb1dc9167"
            ],
            [
                "78aad996c44ff477"
            ]
        ]
    },
    {
        "id": "78aad996c44ff477",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "fix",
        "rules": [
            {
                "t": "set",
                "p": "payload.main.rainfall.rate",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1210,
        "y": 1120,
        "wires": [
            [
                "05b3be6fb1dc9167",
                "7d6e05304b1f0892"
            ]
        ]
    },
    {
        "id": "1abd1f5b439588f5",
        "type": "switch",
        "z": "24dd0f46c5af5563",
        "name": "check",
        "property": "payload.main.humidity",
        "propertyType": "msg",
        "rules": [
            {
                "t": "hask",
                "v": "value",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1570,
        "y": 1080,
        "wires": [
            [
                "c6245efd3a818474",
                "e70fcdf2a7cb2c0f"
            ],
            [
                "635bf4985333c29e"
            ]
        ]
    },
    {
        "id": "635bf4985333c29e",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "fix",
        "rules": [
            {
                "t": "set",
                "p": "payload.main.humidity.value",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1570,
        "y": 1120,
        "wires": [
            [
                "c6245efd3a818474",
                "e70fcdf2a7cb2c0f",
                "956636a78e3acb06"
            ]
        ]
    },
    {
        "id": "6f6a3f906e025f7a",
        "type": "subflow:78aadc484017a120",
        "z": "24dd0f46c5af5563",
        "name": "",
        "x": 250,
        "y": 20,
        "wires": []
    },
    {
        "id": "aa099fcfb4837d7b",
        "type": "catch",
        "z": "24dd0f46c5af5563",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 80,
        "y": 20,
        "wires": [
            [
                "6f6a3f906e025f7a"
            ]
        ]
    },
    {
        "id": "087adb4f4317b484",
        "type": "link out",
        "z": "24dd0f46c5af5563",
        "name": "",
        "mode": "link",
        "links": [
            "2d54aa74dfb53bf5"
        ],
        "x": 975,
        "y": 600,
        "wires": []
    },
    {
        "id": "37b0d1798c9cd8bc",
        "type": "subflow:3f977d5ab3529143",
        "z": "24dd0f46c5af5563",
        "name": "",
        "x": 510,
        "y": 680,
        "wires": [
            [
                "663d1ca38b3c2644"
            ]
        ]
    },
    {
        "id": "663d1ca38b3c2644",
        "type": "function",
        "z": "24dd0f46c5af5563",
        "name": "Clear",
        "func": "msg = {'payload': true}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 600,
        "wires": [
            [
                "087adb4f4317b484"
            ]
        ]
    },
    {
        "id": "7d6e05304b1f0892",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Local weather",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "\"Fixed rain\"",
        "targetType": "jsonata",
        "statusVal": "",
        "statusType": "auto",
        "x": 1240,
        "y": 1160,
        "wires": []
    },
    {
        "id": "956636a78e3acb06",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Local weather",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "\"Fixed hum\"",
        "targetType": "jsonata",
        "statusVal": "",
        "statusType": "auto",
        "x": 1600,
        "y": 1160,
        "wires": []
    },
    {
        "id": "3b102f23a7ccc9af",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "Local weather",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "local_weather",
        "payloadType": "global",
        "x": 2370,
        "y": 880,
        "wires": [
            [
                "19b525a0bba130ea"
            ]
        ]
    },
    {
        "id": "19b525a0bba130ea",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Local weather",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2560,
        "y": 880,
        "wires": []
    },
    {
        "id": "a74edfa58575810c",
        "type": "inject",
        "z": "24dd0f46c5af5563",
        "name": "Remote weather",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "remote_weather",
        "payloadType": "global",
        "x": 2380,
        "y": 920,
        "wires": [
            [
                "90517368487ce44a"
            ]
        ]
    },
    {
        "id": "90517368487ce44a",
        "type": "debug",
        "z": "24dd0f46c5af5563",
        "name": "Remote weather",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2560,
        "y": 920,
        "wires": []
    },
    {
        "id": "68d92c9950682d06",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "Local",
        "rules": [
            {
                "t": "set",
                "p": "payload.main.rainfall.rate",
                "pt": "msg",
                "to": "local_weather.rainfall.rate",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1050,
        "y": 1120,
        "wires": [
            [
                "de56befe825d1f33"
            ]
        ]
    },
    {
        "id": "934b53e81d2d7078",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "Clear All",
        "rules": [
            {
                "t": "set",
                "p": "miniplayers",
                "pt": "flow",
                "to": "[]",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1340,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "be86ca595740444d",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "Clear Spotify",
        "rules": [
            {
                "t": "set",
                "p": "spotify_miniplayers",
                "pt": "flow",
                "to": "[]",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1350,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "697ee693ed213e88",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "Clear Weather",
        "rules": [
            {
                "t": "set",
                "p": "weather_miniplayers",
                "pt": "flow",
                "to": "[]",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1360,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "8a0bd33a90e7f31d",
        "type": "change",
        "z": "24dd0f46c5af5563",
        "name": "Clear Weather",
        "rules": [
            {
                "t": "set",
                "p": "octoprint_miniplayers",
                "pt": "flow",
                "to": "[]",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1360,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "0ca16d72c10c639b",
        "type": "tab",
        "label": "Weather",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "b4fc93e4e59b1ce0",
        "type": "change",
        "z": "0ca16d72c10c639b",
        "name": "Extract Temperature",
        "rules": [
            {
                "t": "move",
                "p": "payload.temperature.value",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 120,
        "wires": [
            [
                "3e60e4637cd71abf",
                "c35e45c0f516a99a",
                "4c86a85b65046c26"
            ]
        ]
    },
    {
        "id": "27218b278a5f0c07",
        "type": "change",
        "z": "0ca16d72c10c639b",
        "name": "Extract Humidity",
        "rules": [
            {
                "t": "move",
                "p": "payload.humidity.value",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 160,
        "wires": [
            [
                "986dcd37d46ec04b",
                "0abd9cd9316a82a2"
            ]
        ]
    },
    {
        "id": "06681ef279067b53",
        "type": "change",
        "z": "0ca16d72c10c639b",
        "name": "Extract Rainfall (rate)",
        "rules": [
            {
                "t": "move",
                "p": "payload.rainfall.rate.value",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 320,
        "wires": [
            [
                "c4a93b1db71586dd",
                "c21111afcf83cac6"
            ]
        ]
    },
    {
        "id": "660abc355b2e0c2a",
        "type": "debug",
        "z": "0ca16d72c10c639b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 170,
        "y": 120,
        "wires": []
    },
    {
        "id": "94d56fb0572172e0",
        "type": "debug",
        "z": "0ca16d72c10c639b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 150,
        "y": 320,
        "wires": []
    },
    {
        "id": "ba2599a7d3320e8e",
        "type": "change",
        "z": "0ca16d72c10c639b",
        "name": "Extract Rainfall (total)",
        "rules": [
            {
                "t": "move",
                "p": "payload.rainfall.total.value",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 360,
        "wires": [
            [
                "cf8efe2a3ea9dda2"
            ]
        ]
    },
    {
        "id": "7581e3379c5afc72",
        "type": "change",
        "z": "0ca16d72c10c639b",
        "name": "Extract Battery",
        "rules": [
            {
                "t": "move",
                "p": "status.battery",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 200,
        "wires": [
            [
                "80a74c9cfaf47968"
            ]
        ]
    },
    {
        "id": "dbb68167a963ec4c",
        "type": "change",
        "z": "0ca16d72c10c639b",
        "name": "Extract Battery",
        "rules": [
            {
                "t": "move",
                "p": "status.battery",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 400,
        "wires": [
            [
                "65c8d47d7c6a6ec0"
            ]
        ]
    },
    {
        "id": "88ab57c997dd03d4",
        "type": "change",
        "z": "0ca16d72c10c639b",
        "name": "Extract Wind (speed)",
        "rules": [
            {
                "t": "move",
                "p": "payload.wind.speed.value",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 520,
        "wires": [
            [
                "554eed567becb189",
                "bb7902f086aa1145"
            ]
        ]
    },
    {
        "id": "e939d8e1af66d07d",
        "type": "change",
        "z": "0ca16d72c10c639b",
        "name": "Extract Battery",
        "rules": [
            {
                "t": "move",
                "p": "status.battery",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 640,
        "wires": [
            [
                "eeae631823e2eeb7"
            ]
        ]
    },
    {
        "id": "642fde970b1d0e95",
        "type": "change",
        "z": "0ca16d72c10c639b",
        "name": "Extract Wind (gust)",
        "rules": [
            {
                "t": "move",
                "p": "payload.wind.gust.value",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 560,
        "wires": [
            [
                "864249a707074177",
                "9ca0b8a1e361cb6d"
            ]
        ]
    },
    {
        "id": "b6b0f2b10b320b7e",
        "type": "change",
        "z": "0ca16d72c10c639b",
        "name": "Extract Wind (direction)",
        "rules": [
            {
                "t": "move",
                "p": "payload.wind.direction.value",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 600,
        "wires": [
            [
                "14a6c8d64e1cc0c5"
            ]
        ]
    },
    {
        "id": "858ccec11185296a",
        "type": "debug",
        "z": "0ca16d72c10c639b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 170,
        "y": 540,
        "wires": []
    },
    {
        "id": "c561e202be6992a3",
        "type": "comment",
        "z": "0ca16d72c10c639b",
        "name": "Example",
        "info": "{\"topic\":\"TH2/0xFA01\",\n \"status\":{\"rssi\":5,\n           \"battery\":9},\n \"payload\":{\"temperature\":\n             {\"value\":18,\n              \"unit\":\"degC\"},\n            \"humidity\":\n             {\"value\":80,\n              \"unit\":\"%\",\n              \"status\":\"WET\"}},\n \"_msgid\":\"bcd39e9fe0db97ef\"}",
        "x": 160,
        "y": 80,
        "wires": []
    },
    {
        "id": "7ce5e6e0f7690118",
        "type": "comment",
        "z": "0ca16d72c10c639b",
        "name": "Example",
        "info": "{\"topic\":\"RAIN2/0x2000\",\n\"status\":{\n    \"rssi\":5,\n    \"battery\":9},\n\"payload\":{\n    \"rainfall\":{\n        \"total\":{\n            \"value\":134.6,\n            \"unit\":\"mm\"},\n        \"rate\":{\n            \"value\":0,\n            \"unit\":\"mm/hr\"}}},\n\"_msgid\":\"5ca64b6cd9d4d8a8\"}",
        "x": 160,
        "y": 280,
        "wires": []
    },
    {
        "id": "e3cc65bb541b0966",
        "type": "comment",
        "z": "0ca16d72c10c639b",
        "name": "Example",
        "info": "{\"topic\":\"WIND2/0xFE00\",\"status\":{\"rssi\":5,\"battery\":9},\"payload\":{\"wind\":{\"direction\":{\"value\":112,\"unit\":\"degrees\"},\"speed\":{\"value\":1.1,\"unit\":\"m/s\"},\"gust\":{\"value\":0.5,\"unit\":\"m/s\"}}},\"_msgid\":\"896077cf77ebf886\"}",
        "x": 160,
        "y": 500,
        "wires": []
    },
    {
        "id": "786965d9ccfa4d2e",
        "type": "link out",
        "z": "0ca16d72c10c639b",
        "name": "",
        "mode": "link",
        "links": [
            "3b74bb8eb85a95f4"
        ],
        "x": 275,
        "y": 200,
        "wires": []
    },
    {
        "id": "298141603f24096e",
        "type": "link out",
        "z": "0ca16d72c10c639b",
        "name": "",
        "mode": "link",
        "links": [
            "7060ab91f961a9b9"
        ],
        "x": 475,
        "y": 440,
        "wires": []
    },
    {
        "id": "66552d3ff3ded45f",
        "type": "link out",
        "z": "0ca16d72c10c639b",
        "name": "",
        "mode": "link",
        "links": [
            "7cbdf15a1deb8538"
        ],
        "x": 235,
        "y": 620,
        "wires": []
    },
    {
        "id": "3b74bb8eb85a95f4",
        "type": "link in",
        "z": "0ca16d72c10c639b",
        "name": "",
        "links": [
            "786965d9ccfa4d2e"
        ],
        "x": 1095,
        "y": 220,
        "wires": [
            [
                "90fa5233a6e4975e"
            ]
        ]
    },
    {
        "id": "7060ab91f961a9b9",
        "type": "link in",
        "z": "0ca16d72c10c639b",
        "name": "",
        "links": [
            "298141603f24096e"
        ],
        "x": 1095,
        "y": 260,
        "wires": [
            [
                "ae24eae7ba02e44f"
            ]
        ]
    },
    {
        "id": "7cbdf15a1deb8538",
        "type": "link in",
        "z": "0ca16d72c10c639b",
        "name": "",
        "links": [
            "66552d3ff3ded45f"
        ],
        "x": 1095,
        "y": 300,
        "wires": [
            [
                "1c356504d556f5ab"
            ]
        ]
    },
    {
        "id": "82b4b898f377e605",
        "type": "change",
        "z": "0ca16d72c10c639b",
        "name": "Read local_weather",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "local_weather",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1640,
        "y": 260,
        "wires": [
            [
                "d3e72e8474524072"
            ]
        ]
    },
    {
        "id": "d3e72e8474524072",
        "type": "debug",
        "z": "0ca16d72c10c639b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1830,
        "y": 260,
        "wires": []
    },
    {
        "id": "90fa5233a6e4975e",
        "type": "change",
        "z": "0ca16d72c10c639b",
        "name": "Purify + combine",
        "rules": [
            {
                "t": "set",
                "p": "local_weather.temperature",
                "pt": "global",
                "to": "payload.temperature.value",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "local_weather.humidity.value",
                "pt": "global",
                "to": "payload.humidity.value",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "local_weather.humidity.status",
                "pt": "global",
                "to": "payload.humidity.status",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1230,
        "y": 220,
        "wires": [
            [
                "d6529bf436770df3"
            ]
        ]
    },
    {
        "id": "e8e05263b64bf7fc",
        "type": "inject",
        "z": "0ca16d72c10c639b",
        "name": "Rainfall",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "status",
                "v": "{\"rssi\":5,\"battery\":9}",
                "vt": "json"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "RAIN2/0x2000",
        "payload": "{\"rainfall\":{\"total\":{\"value\":134.6,\"unit\":\"mm\"},\"rate\":{\"value\":50,\"unit\":\"mm/hr\"}}}",
        "payloadType": "json",
        "x": 330,
        "y": 440,
        "wires": [
            [
                "298141603f24096e"
            ]
        ]
    },
    {
        "id": "85d71c0526e091d3",
        "type": "inject",
        "z": "0ca16d72c10c639b",
        "name": "Wind",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "status",
                "v": "{\"rssi\":5,\"battery\":9}",
                "vt": "json"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "WIND2/0xFE00",
        "payload": "{\"wind\":{\"direction\":{\"value\":112,\"unit\":\"degrees\"},\"speed\":{\"value\":1.1,\"unit\":\"m/s\"},\"gust\":{\"value\":0.5,\"unit\":\"m/s\"}}}",
        "payloadType": "json",
        "x": 150,
        "y": 640,
        "wires": [
            [
                "66552d3ff3ded45f"
            ]
        ]
    },
    {
        "id": "f26ee2683ac8f322",
        "type": "inject",
        "z": "0ca16d72c10c639b",
        "name": "Temp Hum",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "status",
                "v": "{\"rssi\":5,\"battery\":9}",
                "vt": "json"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "TH2/0xFA01",
        "payload": "{\"temperature\":{\"value\":18,\"unit\":\"degC\"},\"humidity\":{\"value\":80,\"unit\":\"%\",\"status\":\"WET\"}}",
        "payloadType": "json",
        "x": 160,
        "y": 220,
        "wires": [
            [
                "786965d9ccfa4d2e"
            ]
        ]
    },
    {
        "id": "ae24eae7ba02e44f",
        "type": "change",
        "z": "0ca16d72c10c639b",
        "name": "Purify + combine",
        "rules": [
            {
                "t": "set",
                "p": "local_weather.rainfall.total",
                "pt": "global",
                "to": "payload.rainfall.total.value",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "local_weather.rainfall.rate",
                "pt": "global",
                "to": "payload.rainfall.rate.value",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1230,
        "y": 260,
        "wires": [
            [
                "d6529bf436770df3"
            ]
        ]
    },
    {
        "id": "7efa4ed8e18f6f72",
        "type": "change",
        "z": "0ca16d72c10c639b",
        "name": "Purify + combine",
        "rules": [
            {
                "t": "set",
                "p": "local_weather.wind.direction",
                "pt": "global",
                "to": "payload.wind.direction.value",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "local_weather.wind.cardinal",
                "pt": "global",
                "to": "payload.wind.cardinal",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "local_weather.wind.speed",
                "pt": "global",
                "to": "payload.wind.speed.value",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "local_weather.wind.gust",
                "pt": "global",
                "to": "payload.wind.gust.value",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1410,
        "y": 300,
        "wires": [
            [
                "d6529bf436770df3"
            ]
        ]
    },
    {
        "id": "af7e1b0a9ac23f84",
        "type": "inject",
        "z": "0ca16d72c10c639b",
        "name": "On boot",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 1160,
        "y": 120,
        "wires": [
            [
                "8e456cc8031ffc32"
            ]
        ]
    },
    {
        "id": "8e456cc8031ffc32",
        "type": "change",
        "z": "0ca16d72c10c639b",
        "name": "Set to default",
        "rules": [
            {
                "t": "set",
                "p": "local_weather",
                "pt": "global",
                "to": "{\"temperature\":0,\"humidity\":{\"value\":0,\"status\":\"NONE\"},\"wind\":{\"direction\":0,\"speed\":0,\"gust\":0},\"rainfall\":{\"total\":0,\"rate\":0}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1330,
        "y": 120,
        "wires": [
            [
                "ff21285ed715cac8"
            ]
        ]
    },
    {
        "id": "a3cfa658c8b37795",
        "type": "http request",
        "z": "0ca16d72c10c639b",
        "name": "",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "body",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 310,
        "y": 820,
        "wires": [
            [
                "31dfcd5f6070adbc"
            ]
        ]
    },
    {
        "id": "7e14db3fbf7f894e",
        "type": "inject",
        "z": "0ca16d72c10c639b",
        "name": "15m",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "requestTimeout",
                "v": "60000",
                "vt": "num"
            },
            {
                "p": "rejectUnauthorized",
                "v": "false",
                "vt": "bool"
            }
        ],
        "repeat": "900",
        "crontab": "",
        "once": false,
        "onceDelay": "0.5",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 150,
        "y": 820,
        "wires": [
            [
                "a3cfa658c8b37795"
            ]
        ]
    },
    {
        "id": "99fdf7c8c44b6b35",
        "type": "debug",
        "z": "0ca16d72c10c639b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1470,
        "y": 840,
        "wires": []
    },
    {
        "id": "628065db25d42ab3",
        "type": "json",
        "z": "0ca16d72c10c639b",
        "name": "",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 490,
        "y": 820,
        "wires": [
            [
                "38f7abbabe926818"
            ]
        ]
    },
    {
        "id": "fab0fa7dcc92607e",
        "type": "change",
        "z": "0ca16d72c10c639b",
        "name": "Purify + set",
        "rules": [
            {
                "t": "delete",
                "p": "payload.coord",
                "pt": "msg"
            },
            {
                "t": "move",
                "p": "payload.weather[0]",
                "pt": "msg",
                "to": "payload.weather",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload.weather.id",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.base",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.main.sea_level",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.main.grnd_level",
                "pt": "msg"
            },
            {
                "t": "move",
                "p": "payload.dt",
                "pt": "msg",
                "to": "payload.time",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.wind.deg",
                "pt": "msg",
                "to": "payload.wind.direction",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.main.humidity",
                "pt": "msg",
                "to": "payload.main.humidity.value",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload.dt",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.sys",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.id",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.cod",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.time",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.rain",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "headers",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "responseUrl",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "redirectList",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "retry",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "statusCode",
                "pt": "msg"
            },
            {
                "t": "set",
                "p": "remote_weather",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1310,
        "y": 840,
        "wires": [
            [
                "99fdf7c8c44b6b35"
            ]
        ]
    },
    {
        "id": "4c548316738924d5",
        "type": "inject",
        "z": "0ca16d72c10c639b",
        "name": "(Dummy data)",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"coord\":{\"lon\":-1.7635,\"lat\":54.6488},\"weather\":[{\"id\":0,\"main\":\"Unknown\",\"description\":\"unknown\",\"icon\":\"0\"}],\"base\":\"stations\",\"main\":{\"temp\":0,\"feels_like\":0,\"temp_min\":0,\"temp_max\":0,\"pressure\":0,\"humidity\":0,\"sea_level\":0,\"grnd_level\":0},\"visibility\":0,\"wind\":{\"speed\":0,\"deg\":0,\"gust\":0},\"rain\":{\"1d\":0},\"clouds\":{\"all\":0},\"dt\":1662475264,\"sys\":{\"type\":2,\"id\":2006285,\"country\":\"GB\",\"sunrise\":1662441785,\"sunset\":1662490097},\"timezone\":3600,\"id\":2646963,\"name\":\"High Etherley\",\"cod\":200}",
        "payloadType": "json",
        "x": 1450,
        "y": 620,
        "wires": [
            [
                "4bed15aeba93ac0c"
            ]
        ]
    },
    {
        "id": "d6529bf436770df3",
        "type": "function",
        "z": "0ca16d72c10c639b",
        "name": "Reset msg",
        "func": "return {};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1430,
        "y": 260,
        "wires": [
            [
                "82b4b898f377e605"
            ]
        ]
    },
    {
        "id": "ff21285ed715cac8",
        "type": "debug",
        "z": "0ca16d72c10c639b",
        "name": "Local weather",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "\"Reset\"",
        "targetType": "jsonata",
        "statusVal": "",
        "statusType": "auto",
        "x": 1520,
        "y": 120,
        "wires": []
    },
    {
        "id": "38f7abbabe926818",
        "type": "function",
        "z": "0ca16d72c10c639b",
        "name": "Decode icon",
        "func": "var id = msg.payload.weather[0].id\nvar icon = msg.payload.weather[0].icon\n\nif (id == 800){\n    icon = 'clear_sunny'}\nelse if (id == 801 || id == 802){\n    icon = 'partly_cloudy'}\nelse if (id == 803){\n    icon = 'partly_sunny'}\nelse if (id == 804){\n    icon = 'cloudy'}\nelse if (id == 300 || id == 301 || id == 302 || id == 310 || id == 311 || id == 500 || id == 520 || id == 521){\n    icon = 'chance_rain'}\nelse if (id == 312 || id == 313 || id == 314 || id == 321 || id == 501 || id == 502 || id == 503 || id == 504 || id == 522 || id == 531){\n    icon = 'rain'}\nelse if (id == 210 || id == 211 || id == 212 || id == 221 || id == 230){\n    icon = 'chance_t_storm'}\nelse if (id == 200 || id == 201 || id == 202 || id == 231 || id == 232){\n    icon = 't_storm'}\nelse if (id == 615 || id == 620){\n    icon = 'chance_flurries'}\nelse if (id == 616 || id == 621 || id == 622){\n    icon = 'flurries'}\nelse if (id == 612){\n    icon = 'chance_sleet'}\nelse if (id == 611 || id == 613){\n    icon = 'sleet'}\nelse if (id == 511 || id == 600){\n    icon = 'chance_snow'}\nelse if (id == 601 || id == 602){\n    icon = 'snow'}\nelse if (id == 701 || id == 711 || id == 721 || id == 731 || id == 741 || id == 751 || id == 761 || id == 762 || id == 771 || id == 781){\n    icon = 'fog_haze'}\nelse {\n    id = 0\n    icon = 'unknown'}\n\nmsg.payload.weather[0].id = id\nmsg.payload.weather[0].icon = icon\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 820,
        "wires": [
            [
                "533d094a7f5a68ba",
                "ce743b00d26be618"
            ]
        ]
    },
    {
        "id": "1c356504d556f5ab",
        "type": "function",
        "z": "0ca16d72c10c639b",
        "name": "Set cardinal",
        "func": "degrees = msg.payload.wind.direction.value\ndirection = 'Unknown'\n\nif (22.5 <= degrees < 67.5){\n    direction = 'North East'\n}\nelse if (67.5 <= degrees < 112.5){\n    direction = 'East'\n}\nelse if (112.5 <= degrees < 157.5){\n    direction = 'South East'\n}\nelse if (157.5 <= degrees < 202.5){\n    direction = 'South'\n}\nelse if (202.5 <= degrees < 247.5){\n    direction = 'South West'\n}\nelse if (247.5 <= degrees < 292.5){\n    direction == 'West'\n}\nelse if (292.5 <= degrees < 337.5){\n    direction = 'North West'\n}\nelse if (337.5 <= degrees || degrees < 22.5){\n    direction = 'North'\n}\n\nmsg.payload.wind.cardinal = direction\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1210,
        "y": 300,
        "wires": [
            [
                "7efa4ed8e18f6f72"
            ]
        ]
    },
    {
        "id": "533d094a7f5a68ba",
        "type": "switch",
        "z": "0ca16d72c10c639b",
        "name": "If snow",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "hask",
                "v": "snow",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 820,
        "y": 820,
        "wires": [
            [
                "0f8bef38f38adbbe"
            ],
            [
                "c43e6504ad3368e5"
            ]
        ]
    },
    {
        "id": "5ea88f0d2bd36822",
        "type": "switch",
        "z": "0ca16d72c10c639b",
        "name": "If rain",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "hask",
                "v": "rain",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 860,
        "wires": [
            [
                "2955e7f403a6eaa5"
            ],
            [
                "59f086d7fd954986"
            ]
        ]
    },
    {
        "id": "ce743b00d26be618",
        "type": "debug",
        "z": "0ca16d72c10c639b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 810,
        "y": 860,
        "wires": []
    },
    {
        "id": "dcf66d2579639249",
        "type": "inject",
        "z": "0ca16d72c10c639b",
        "name": "Test Snow",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"coord\":{\"lon\":-1.7635,\"lat\":54.6488},\"weather\":[{\"id\":601,\"main\":\"Snow\",\"description\":\"Snow\",\"icon\":\"13d\"}],\"base\":\"stations\",\"main\":{\"temp\":-0.7,\"feels_like\":-0.7,\"temp_min\":-2.14,\"temp_max\":0.8,\"pressure\":1008,\"humidity\":83},\"visibility\":10000,\"wind\":{\"speed\":0.89,\"deg\":228,\"gust\":3.58},\"clouds\":{\"all\":100},\"snow\":{\"1d\":50},\"dt\":1670671881,\"sys\":{\"type\":2,\"id\":2011984,\"country\":\"GB\",\"sunrise\":1670660309,\"sunset\":1670686881},\"timezone\":0,\"id\":2646963,\"name\":\"High Etherley\",\"cod\":200}",
        "payloadType": "json",
        "x": 1460,
        "y": 660,
        "wires": [
            [
                "4bed15aeba93ac0c"
            ]
        ]
    },
    {
        "id": "c43e6504ad3368e5",
        "type": "change",
        "z": "0ca16d72c10c639b",
        "name": "None",
        "rules": [
            {
                "t": "set",
                "p": "payload.snow",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 820,
        "wires": [
            [
                "5ea88f0d2bd36822"
            ]
        ]
    },
    {
        "id": "59f086d7fd954986",
        "type": "change",
        "z": "0ca16d72c10c639b",
        "name": "None",
        "rules": [
            {
                "t": "set",
                "p": "payload.main.rainfall.rate",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1150,
        "y": 880,
        "wires": [
            [
                "fab0fa7dcc92607e"
            ]
        ]
    },
    {
        "id": "af03b02955e68ef9",
        "type": "inject",
        "z": "0ca16d72c10c639b",
        "name": "Test Rain",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"coord\":{\"lon\":-1.7635,\"lat\":54.6488},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"base\":\"stations\",\"main\":{\"temp\":-0.7,\"feels_like\":-0.7,\"temp_min\":-2.14,\"temp_max\":0.8,\"pressure\":1008,\"humidity\":83},\"visibility\":10000,\"wind\":{\"speed\":0.89,\"deg\":228,\"gust\":3.58},\"clouds\":{\"all\":100},\"rain\":{\"4h\":50},\"dt\":1670671881,\"sys\":{\"type\":2,\"id\":2011984,\"country\":\"GB\",\"sunrise\":1670660309,\"sunset\":1670686881},\"timezone\":0,\"id\":2646963,\"name\":\"High Etherley\",\"cod\":200}",
        "payloadType": "json",
        "x": 1460,
        "y": 700,
        "wires": [
            [
                "4bed15aeba93ac0c"
            ]
        ]
    },
    {
        "id": "e3ea7b60d7c0e6a4",
        "type": "inject",
        "z": "0ca16d72c10c639b",
        "name": "Test Both",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"coord\":{\"lon\":-1.7635,\"lat\":54.6488},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"base\":\"stations\",\"main\":{\"temp\":-0.7,\"feels_like\":-0.7,\"temp_min\":-2.14,\"temp_max\":0.8,\"pressure\":1008,\"humidity\":83},\"visibility\":10000,\"wind\":{\"speed\":0.89,\"deg\":228,\"gust\":3.58},\"clouds\":{\"all\":100},\"rain\":{\"1d\":100},\"snow\":{\"1d\":50},\"dt\":1670671881,\"sys\":{\"type\":2,\"id\":2011984,\"country\":\"GB\",\"sunrise\":1670660309,\"sunset\":1670686881},\"timezone\":0,\"id\":2646963,\"name\":\"High Etherley\",\"cod\":200}",
        "payloadType": "json",
        "x": 1460,
        "y": 740,
        "wires": [
            [
                "4bed15aeba93ac0c"
            ]
        ]
    },
    {
        "id": "297df4fdf68bcd09",
        "type": "comment",
        "z": "0ca16d72c10c639b",
        "name": "CONVERT UNITS",
        "info": "to convert wind units from m/s to mph,\nmultiply the value by 2.237",
        "x": 1170,
        "y": 80,
        "wires": []
    },
    {
        "id": "911ca4aacfebbbe1",
        "type": "inject",
        "z": "0ca16d72c10c639b",
        "name": "Test Neither",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"coord\":{\"lon\":-1.7635,\"lat\":54.6488},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"base\":\"stations\",\"main\":{\"temp\":16.4,\"feels_like\":16.5,\"temp_min\":15.52,\"temp_max\":18.27,\"pressure\":1008,\"humidity\":92,\"sea_level\":1008,\"grnd_level\":984},\"visibility\":5000,\"wind\":{\"speed\":1.79,\"deg\":124,\"gust\":4.47},\"clouds\":{\"all\":50},\"dt\":1662475264,\"sys\":{\"type\":2,\"id\":2006285,\"country\":\"GB\",\"sunrise\":1662441785,\"sunset\":1662490097},\"timezone\":3600,\"id\":2646963,\"name\":\"High Etherley\",\"cod\":200}",
        "payloadType": "json",
        "x": 1450,
        "y": 780,
        "wires": [
            [
                "4bed15aeba93ac0c"
            ]
        ]
    },
    {
        "id": "dd340583f6955421",
        "type": "inject",
        "z": "0ca16d72c10c639b",
        "name": "True",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 1450,
        "y": 220,
        "wires": [
            [
                "82b4b898f377e605"
            ]
        ]
    },
    {
        "id": "59264cab5e64f9cd",
        "type": "switch",
        "z": "0ca16d72c10c639b",
        "name": "",
        "property": "payload.rainfall.rate",
        "propertyType": "msg",
        "rules": [
            {
                "t": "hask",
                "v": "value",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 330,
        "y": 360,
        "wires": [
            [
                "ba2599a7d3320e8e",
                "06681ef279067b53",
                "dbb68167a963ec4c",
                "298141603f24096e"
            ],
            [
                "dcf4d4580ed94c89"
            ]
        ]
    },
    {
        "id": "dcf4d4580ed94c89",
        "type": "change",
        "z": "0ca16d72c10c639b",
        "name": "repair",
        "rules": [
            {
                "t": "set",
                "p": "payload.rainfall.rate.value",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 400,
        "wires": [
            [
                "06681ef279067b53",
                "ba2599a7d3320e8e",
                "dbb68167a963ec4c",
                "298141603f24096e"
            ]
        ]
    },
    {
        "id": "2955e7f403a6eaa5",
        "type": "function",
        "z": "0ca16d72c10c639b",
        "name": "Extract rain",
        "func": "var keys = Object.keys(msg.payload.rain)\nmsg.payload.main.rainfall = {\"rate\": 0}\nmsg.payload.main.rainfall.rate = msg.payload.rain[keys[0]]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1130,
        "y": 840,
        "wires": [
            [
                "fab0fa7dcc92607e"
            ]
        ]
    },
    {
        "id": "0f8bef38f38adbbe",
        "type": "function",
        "z": "0ca16d72c10c639b",
        "name": "Extract snow",
        "func": "var keys = Object.keys(msg.payload.snow)\nmsg.payload.main.rainfall = {\"rate\": 0}\nmsg.payload.main.rainfall.rate = msg.payload.snow[keys[0]]\nmsg.payload.snow = true\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1130,
        "y": 800,
        "wires": [
            [
                "fab0fa7dcc92607e"
            ]
        ]
    },
    {
        "id": "26471368fa8f1eeb",
        "type": "change",
        "z": "0ca16d72c10c639b",
        "name": "Get",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "local_weather",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1310,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "36739062e6bcd0ba",
        "type": "change",
        "z": "0ca16d72c10c639b",
        "name": "Get",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "remote_weather",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1310,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "a365d870671b6f6f",
        "type": "inject",
        "z": "0ca16d72c10c639b",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "0.5",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 1150,
        "y": 360,
        "wires": [
            [
                "26471368fa8f1eeb"
            ]
        ]
    },
    {
        "id": "f57ce69eeac22db4",
        "type": "inject",
        "z": "0ca16d72c10c639b",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "0.5",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 1150,
        "y": 400,
        "wires": [
            [
                "36739062e6bcd0ba"
            ]
        ]
    },
    {
        "id": "40f1b23f5dc98eb8",
        "type": "hue-temperature",
        "z": "0ca16d72c10c639b",
        "name": "Room Temp",
        "bridge": "1f7f251e7826cedc",
        "sensorid": "f7f886b2-ceb0-4988-b09e-b830be4b7d1d",
        "skipevents": false,
        "initevents": false,
        "x": 170,
        "y": 980,
        "wires": [
            [
                "ff93423240865818"
            ]
        ]
    },
    {
        "id": "80a74c9cfaf47968",
        "type": "ui_text",
        "z": "0ca16d72c10c639b",
        "group": "59c25cd51efb9e47",
        "order": 1,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "Temp & Hum",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 630,
        "y": 240,
        "wires": []
    },
    {
        "id": "65c8d47d7c6a6ec0",
        "type": "ui_text",
        "z": "0ca16d72c10c639b",
        "group": "59c25cd51efb9e47",
        "order": 2,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "Rainfall",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 760,
        "y": 420,
        "wires": []
    },
    {
        "id": "eeae631823e2eeb7",
        "type": "ui_text",
        "z": "0ca16d72c10c639b",
        "group": "59c25cd51efb9e47",
        "order": 3,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "Wind",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 630,
        "y": 680,
        "wires": []
    },
    {
        "id": "4c86a85b65046c26",
        "type": "ui_text",
        "z": "0ca16d72c10c639b",
        "group": "63bf67d663da6832",
        "order": 10,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Outside",
        "format": "{{msg.payload}}C",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 880,
        "y": 120,
        "wires": []
    },
    {
        "id": "ff93423240865818",
        "type": "ui_text",
        "z": "0ca16d72c10c639b",
        "group": "63bf67d663da6832",
        "order": 11,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Inside",
        "format": "{{msg.payload.celsius}}C",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 330,
        "y": 980,
        "wires": []
    },
    {
        "id": "c35e45c0f516a99a",
        "type": "ui_gauge",
        "z": "0ca16d72c10c639b",
        "name": "",
        "group": "3df6e7668eff8b51",
        "order": 1,
        "width": 4,
        "height": 3,
        "gtype": "gage",
        "title": "Temperature",
        "label": "C",
        "format": "{{value}}",
        "min": "-10",
        "max": "50",
        "colors": [
            "#009dff",
            "#c8c800",
            "#b83232"
        ],
        "seg1": "15",
        "seg2": "30",
        "diff": false,
        "className": "",
        "x": 630,
        "y": 120,
        "wires": []
    },
    {
        "id": "0abd9cd9316a82a2",
        "type": "ui_gauge",
        "z": "0ca16d72c10c639b",
        "name": "",
        "group": "3df6e7668eff8b51",
        "order": 2,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Humidity",
        "label": "%",
        "format": "{{value}}",
        "min": "0",
        "max": "100",
        "colors": [
            "#00ccff",
            "#0062ff",
            "#1100ff"
        ],
        "seg1": "45",
        "seg2": "75",
        "diff": false,
        "className": "",
        "x": 620,
        "y": 200,
        "wires": []
    },
    {
        "id": "14a6c8d64e1cc0c5",
        "type": "ui_gauge",
        "z": "0ca16d72c10c639b",
        "name": "",
        "group": "ddf875126abe764a",
        "order": 3,
        "width": 7,
        "height": 3,
        "gtype": "compass",
        "title": "Direction",
        "label": "degrees",
        "format": "{{value}}",
        "min": 0,
        "max": "360",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "diff": false,
        "className": "",
        "x": 640,
        "y": 640,
        "wires": []
    },
    {
        "id": "c21111afcf83cac6",
        "type": "ui_gauge",
        "z": "0ca16d72c10c639b",
        "name": "",
        "group": "682ce6860f78106d",
        "order": 1,
        "width": 7,
        "height": 4,
        "gtype": "wave",
        "title": "Rate of Rainfall",
        "label": "mm/h",
        "format": "{{value}}",
        "min": "0",
        "max": "10",
        "colors": [
            "#00ccff",
            "#007bff",
            "#1100ff"
        ],
        "seg1": "3",
        "seg2": "7",
        "diff": false,
        "className": "",
        "x": 780,
        "y": 340,
        "wires": []
    },
    {
        "id": "bb7902f086aa1145",
        "type": "ui_gauge",
        "z": "0ca16d72c10c639b",
        "name": "",
        "group": "ddf875126abe764a",
        "order": 1,
        "width": 4,
        "height": 3,
        "gtype": "gage",
        "title": "Speed",
        "label": "m/s",
        "format": "{{value}}",
        "min": 0,
        "max": "10",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "2.5",
        "seg2": "7.5",
        "diff": false,
        "className": "",
        "x": 630,
        "y": 520,
        "wires": []
    },
    {
        "id": "9ca0b8a1e361cb6d",
        "type": "ui_gauge",
        "z": "0ca16d72c10c639b",
        "name": "",
        "group": "ddf875126abe764a",
        "order": 2,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Gust",
        "label": "m/s",
        "format": "{{value}}",
        "min": 0,
        "max": "10",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "2.5",
        "seg2": "7.5",
        "diff": false,
        "className": "",
        "x": 630,
        "y": 600,
        "wires": []
    },
    {
        "id": "3e60e4637cd71abf",
        "type": "ui_chart",
        "z": "0ca16d72c10c639b",
        "name": "",
        "group": "3df6e7668eff8b51",
        "order": 3,
        "width": 7,
        "height": 6,
        "label": "Temperature (C)",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "(No Data)",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "6",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 650,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "986dcd37d46ec04b",
        "type": "ui_chart",
        "z": "0ca16d72c10c639b",
        "name": "",
        "group": "3df6e7668eff8b51",
        "order": 4,
        "width": 7,
        "height": 5,
        "label": "Humidity (%)",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "(No Data)",
        "dot": false,
        "ymin": "0",
        "ymax": "100",
        "removeOlder": "6",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 630,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "c4a93b1db71586dd",
        "type": "ui_chart",
        "z": "0ca16d72c10c639b",
        "name": "",
        "group": "682ce6860f78106d",
        "order": 2,
        "width": 7,
        "height": 5,
        "label": "Rate of Rainfall (mm/h)",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "(No Data)",
        "dot": false,
        "ymin": "0",
        "ymax": "",
        "removeOlder": "3",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 810,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "cf8efe2a3ea9dda2",
        "type": "ui_chart",
        "z": "0ca16d72c10c639b",
        "name": "",
        "group": "682ce6860f78106d",
        "order": 3,
        "width": 7,
        "height": 5,
        "label": "Total Rainfall (mm)",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "(No Data)",
        "dot": false,
        "ymin": "0",
        "ymax": "",
        "removeOlder": "3",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 790,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "554eed567becb189",
        "type": "ui_chart",
        "z": "0ca16d72c10c639b",
        "name": "",
        "group": "ddf875126abe764a",
        "order": 4,
        "width": 7,
        "height": 4,
        "label": "Speed (m/s)",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "(No Data)",
        "dot": false,
        "ymin": "0",
        "ymax": "",
        "removeOlder": "6",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 650,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "864249a707074177",
        "type": "ui_chart",
        "z": "0ca16d72c10c639b",
        "name": "",
        "group": "ddf875126abe764a",
        "order": 5,
        "width": 7,
        "height": 4,
        "label": "Gust (m/s)",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "(No Data)",
        "dot": false,
        "ymin": "0",
        "ymax": "",
        "removeOlder": "6",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 650,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "cc351b72e1385cb5",
        "type": "rfx-sensor",
        "z": "0ca16d72c10c639b",
        "name": "Temp Hum sensor",
        "port": "dd76bbf1d997720e",
        "topicSource": "single",
        "topic": "TH2/0xFA01",
        "x": 170,
        "y": 160,
        "wires": [
            [
                "b4fc93e4e59b1ce0",
                "27218b278a5f0c07",
                "660abc355b2e0c2a",
                "7581e3379c5afc72",
                "786965d9ccfa4d2e"
            ]
        ]
    },
    {
        "id": "947e2f040cd90c93",
        "type": "rfx-sensor",
        "z": "0ca16d72c10c639b",
        "name": "Rainfall sensor",
        "port": "dd76bbf1d997720e",
        "topicSource": "single",
        "topic": "RAIN2/0x2000",
        "x": 160,
        "y": 360,
        "wires": [
            [
                "94d56fb0572172e0",
                "59264cab5e64f9cd"
            ]
        ]
    },
    {
        "id": "f0f5b76ec25040a9",
        "type": "rfx-sensor",
        "z": "0ca16d72c10c639b",
        "name": "Wind sensor",
        "port": "dd76bbf1d997720e",
        "topicSource": "single",
        "topic": "WIND2/0xFE00",
        "x": 150,
        "y": 580,
        "wires": [
            [
                "e939d8e1af66d07d",
                "88ab57c997dd03d4",
                "b6b0f2b10b320b7e",
                "642fde970b1d0e95",
                "858ccec11185296a",
                "66552d3ff3ded45f"
            ]
        ]
    },
    {
        "id": "2da3d123093620b8",
        "type": "inject",
        "z": "0ca16d72c10c639b",
        "name": "On boot",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "",
        "payload": "{\"coord\":{\"lon\":-1.7635,\"lat\":54.6488},\"weather\":[{\"id\":0,\"main\":\"Unknown\",\"description\":\"unknown\",\"icon\":\"0\"}],\"base\":\"stations\",\"main\":{\"temp\":0,\"feels_like\":0,\"temp_min\":0,\"temp_max\":0,\"pressure\":0,\"humidity\":0,\"sea_level\":0,\"grnd_level\":0},\"visibility\":0,\"wind\":{\"speed\":0,\"deg\":0,\"gust\":0},\"rain\":{\"1d\":0},\"clouds\":{\"all\":0},\"dt\":1662475264,\"sys\":{\"type\":2,\"id\":2006285,\"country\":\"GB\",\"sunrise\":1662441785,\"sunset\":1662490097},\"timezone\":3600,\"id\":2646963,\"name\":\"High Etherley\",\"cod\":200}",
        "payloadType": "json",
        "x": 320,
        "y": 900,
        "wires": [
            [
                "628065db25d42ab3",
                "1290b2169fd55938"
            ]
        ]
    },
    {
        "id": "20c1c5817ba351a0",
        "type": "catch",
        "z": "0ca16d72c10c639b",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 80,
        "y": 20,
        "wires": [
            [
                "e65621ad5c9461db"
            ]
        ]
    },
    {
        "id": "e65621ad5c9461db",
        "type": "subflow:78aadc484017a120",
        "z": "0ca16d72c10c639b",
        "name": "",
        "x": 250,
        "y": 20,
        "wires": []
    },
    {
        "id": "31dfcd5f6070adbc",
        "type": "switch",
        "z": "0ca16d72c10c639b",
        "name": "Check code",
        "property": "statusCode",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 310,
        "y": 860,
        "wires": [
            [
                "628065db25d42ab3"
            ],
            []
        ]
    },
    {
        "id": "1290b2169fd55938",
        "type": "debug",
        "z": "0ca16d72c10c639b",
        "name": "Global weather",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "\"Reset\"",
        "targetType": "jsonata",
        "statusVal": "",
        "statusType": "auto",
        "x": 520,
        "y": 780,
        "wires": []
    },
    {
        "id": "4bed15aeba93ac0c",
        "type": "link out",
        "z": "0ca16d72c10c639b",
        "name": "link out 4",
        "mode": "link",
        "links": [
            "ca3b00a0d00392d9"
        ],
        "x": 1605,
        "y": 700,
        "wires": []
    },
    {
        "id": "ca3b00a0d00392d9",
        "type": "link in",
        "z": "0ca16d72c10c639b",
        "name": "link in 3",
        "links": [
            "4bed15aeba93ac0c"
        ],
        "x": 595,
        "y": 860,
        "wires": [
            [
                "38f7abbabe926818"
            ]
        ]
    },
    {
        "id": "508553ca48fb5556",
        "type": "comment",
        "z": "0ca16d72c10c639b",
        "name": "OpenWeatherMap",
        "info": "Please set the http request node\nto the OpenWeatherMap API you created.",
        "x": 190,
        "y": 780,
        "wires": []
    },
    {
        "id": "32100583b358b6d5",
        "type": "mqtt-broker",
        "name": "MQTT Server",
        "broker": "192.168.1.201",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "63bf67d663da6832",
        "type": "ui_group",
        "name": "Miniplayer",
        "tab": "28299cf5c2ae4902",
        "order": 1,
        "disp": false,
        "width": "7",
        "collapse": false,
        "className": ""
    },
    {
        "id": "7a4150cde2244860",
        "type": "ui_group",
        "name": "Spotify",
        "tab": "28299cf5c2ae4902",
        "order": 2,
        "disp": false,
        "width": "7",
        "collapse": false,
        "className": ""
    },
    {
        "id": "04ef89f479803e78",
        "type": "ui_group",
        "name": "Miniplayer",
        "tab": "30c4d05c2e0ee6bd",
        "order": 2,
        "disp": true,
        "width": 6,
        "collapse": false,
        "className": ""
    },
    {
        "id": "2a745e6b.07df92",
        "type": "ui_group",
        "name": "Default",
        "tab": "0397cfb964aa99cd",
        "order": 5,
        "disp": false,
        "width": "10",
        "collapse": false,
        "className": ""
    },
    {
        "id": "1f7f251e7826cedc",
        "type": "hue-bridge",
        "name": "Anths Bridge",
        "bridge": "192.168.1.10",
        "key": "UHshZVAj4tl9z50I85zcATVv3uQqAdUXogUmFKVc",
        "worker": "8",
        "autoupdates": true,
        "disableupdates": false
    },
    {
        "id": "59c25cd51efb9e47",
        "type": "ui_group",
        "name": "Batteries",
        "tab": "30c4d05c2e0ee6bd",
        "order": 2,
        "disp": true,
        "width": 6,
        "collapse": false,
        "className": ""
    },
    {
        "id": "3df6e7668eff8b51",
        "type": "ui_group",
        "name": "Temperature and Humidity",
        "tab": "169aef722540d3ed",
        "order": 1,
        "disp": true,
        "width": 7,
        "collapse": false,
        "className": ""
    },
    {
        "id": "ddf875126abe764a",
        "type": "ui_group",
        "name": "Wind",
        "tab": "169aef722540d3ed",
        "order": 3,
        "disp": true,
        "width": 7,
        "collapse": false,
        "className": ""
    },
    {
        "id": "682ce6860f78106d",
        "type": "ui_group",
        "name": "Rainfall",
        "tab": "169aef722540d3ed",
        "order": 2,
        "disp": true,
        "width": 7,
        "collapse": false,
        "className": ""
    },
    {
        "id": "dd76bbf1d997720e",
        "type": "rfxtrx-port",
        "port": "/dev/ttyUSB0",
        "enableDebug": false,
        "rfyVenetianMode": "EU"
    },
    {
        "id": "28299cf5c2ae4902",
        "type": "ui_tab",
        "name": "Home",
        "icon": "developer_dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "30c4d05c2e0ee6bd",
        "type": "ui_tab",
        "name": "Other",
        "icon": "fa-ellipsis-h",
        "order": 7,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "0397cfb964aa99cd",
        "type": "ui_tab",
        "name": "Spotify",
        "icon": "fa-spotify",
        "order": 4,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "169aef722540d3ed",
        "type": "ui_tab",
        "name": "Outdoor Sensors",
        "icon": "fa-thermometer-three-quarters",
        "order": 3,
        "disabled": false,
        "hidden": false
    }
]